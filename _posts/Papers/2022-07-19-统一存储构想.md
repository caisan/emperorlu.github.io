## Unified Storage

> ä¸å–„äººå±…ï¼Œå¦‚å…¥èŠå…°ä¹‹å®¤ï¼Œä¹…è€Œä¸é—»å…¶é¦™ï¼Œå³ä¸ä¹‹åŒ–çŸ£ï¼›ä¸ä¸å–„äººå±…ï¼Œå¦‚å…¥é±¼ä¹‹è‚†ï¼Œä¹…è€Œä¸é—»å…¶è‡­ï¼Œäº¦ä¸ä¹‹åŒ–çŸ£ã€‚â€”â€” ä¸˜å­

## èƒŒæ™¯

- ä¼ ç»Ÿå­˜å‚¨æ¶æ„é—®é¢˜
  - å†—é•¿å­˜å‚¨æ ˆï¼Œä½æ•ˆç´¢å¼•ï¼Œèµ„æºåˆ†é…ï¼Œæ–°ä»‹è´¨...
  - è§£è€¦ vs èšåˆï¼Œåˆ†ç¦» vs ç»Ÿä¸€...
- ç»Ÿä¸€å­˜å‚¨æ–¹å¼
  - ä¸åŒå­˜å‚¨æ ¼å¼ï¼šè¡¨æ ¼ï¼Œå¯¹è±¡...
  - ä¸åŒå­˜å‚¨åº”ç”¨ï¼šsqlï¼Œs3ï¼Œå›¾...
  - ä¸åŒå·¥ä½œè´Ÿè½½ï¼Œä¸šåŠ¡éœ€æ±‚ï¼Ÿï¼šOLTPå’ŒOLAP è¯·æ±‚ï¼Œæˆ–æ··åˆäº‹åŠ¡/åˆ†æå¤„ç† (HTAP) å·¥ä½œè´Ÿè½½
- æ–°ç´¢å¼•æŠ€æœ¯çš„éªŒè¯
- 

## è®¾è®¡

- åˆ†å±‚è§£è€¦ï¼Œç»Ÿä¸€å­˜å‚¨

<img src="../../photos/Unify/unified storage.jpg" alt="img" style="zoom: 50%;" />

## ç›¸å…³è®ºæ–‡1 â€” ç»Ÿä¸€å­˜å‚¨æ ¼å¼

### è®ºæ–‡1 (Microsoft): Windows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency  

- å¾®è½¯å‘å…¨çƒæä¾›çš„å•†ä¸šå­˜å‚¨å¹³å°ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å¤§å®¹é‡ã€é«˜å¯é ã€é«˜å¯ç”¨ã€å¼ºä¸€è‡´çš„å­˜å‚¨æœåŠ¡ï¼ŒWASå­˜å‚¨æ•°æ®ä¸­å¿ƒåˆ†å¸ƒåœ¨å…¨çƒå¤šåœ°ï¼Œä½¿å¾—ç”¨æˆ·æ•°æ®å¾—åˆ°æœ€å¤§é™åº¦çš„å¯é æ€§ä¿éšœï¼ŒWASå®£ç§°å…¶æä¾›çš„æœåŠ¡æ»¡è¶³CAPä¸‰ä¸ªæ¡ä»¶

- ç»Ÿä¸€å­˜å‚¨ï¼šåŸºäºåŒä¸€å¥—æ¶æ„æä¾›äº†å¯¹è±¡å­˜å‚¨ (Blob)ã€ç»“æ„åŒ–å­˜å‚¨ (Table) å’Œé˜Ÿåˆ—æœåŠ¡ (Queue)ï¼Œè¿™ä¸‰ç§æœåŠ¡å…±äº«äº†ä¸€ä¸ªæä¾›äº†å¼ºä¸€è‡´ã€global namespaceã€å¤šåœ°å®¹ç¾ã€æ”¯æŒå¤šç§Ÿæˆ·çš„å­˜å‚¨å±‚

- ä¸‰ç§æœåŠ¡éƒ½ä½¿ç”¨äº†åŒä¸€å¥—**global namespace**ï¼Œæ ¼å¼ä¸ºï¼š

  ```
  http(s)://AccountName.<service>.core.windows.net/PartitionName/ObjectName
  ```

  - AccountNameä¼šä½œä¸ºDNSè§£æçš„ä¸€éƒ¨åˆ†ï¼Œæ¥ç¡®å®šè¿™ä¸ªaccountå¯¹åº”çš„primary data centerï¼ˆå¦‚æœéœ€è¦è·¨åœ°åŸŸå°±éœ€è¦ä½¿ç”¨å¤šä¸ªaccountï¼‰
  - PartitionNameæ˜¯è·¨å¯¹è±¡äº‹åŠ¡çš„è¾¹ç•Œ
  - ObjectNameæ˜¯å¯é€‰çš„ï¼ŒBlobå°±æ²¡æœ‰

- Tableçš„æ¯è¡Œçš„primary keyç”±PartitionNameå’ŒObjectNameç»„æˆã€‚Queueçš„PartitionNameç”¨æ¥æ ‡è¯†é˜Ÿåˆ—ï¼Œè€ŒObjectNameåˆ™ç”¨æ¥æ ‡è¯†æ¶ˆæ¯ã€‚

- WASçš„åº•åº§æ˜¯Windows Azure Fabric Controllerï¼Œè´Ÿè´£åˆ†é…å’Œç®¡ç†èµ„æºï¼ŒWASä¼šä»å®ƒé‚£é‡Œè·å–ç½‘ç»œæ‹“æ‰‘ã€é›†ç¾¤ç‰©ç†å¸ƒå±€ã€å­˜å‚¨èŠ‚ç‚¹çš„ç¡¬ä»¶ä¿¡æ¯ç­‰

  <img src="../../photos/Unify/image-20220801131507170.png" alt="image-20220801131507170" style="zoom: 50%;" />

- ä¸€å¥—WASç¯å¢ƒç”±è‹¥å¹²å¥—storage stampå’Œä¸€å¥—location serviceç»„æˆï¼š

  - æ¯å¥—storage stampæ˜¯ä¸€ä¸ªå°é›†ç¾¤ï¼Œå…¸å‹çš„å¤§å°æ˜¯10-20ä¸ªrackï¼Œæ¯ä¸ªrackæœ‰18ä¸ªèŠ‚ç‚¹ã€‚ç¬¬ä¸€ä»£storage stampå®¹é‡æ˜¯2PBï¼Œä¸‹ä¸€ä»£ä¼šæå‡åˆ°30PBã€‚storage stampçš„ç›®æ ‡æ˜¯è¾¾åˆ°70%çš„ä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬äº†å®¹é‡ã€è®¡ç®—ã€å¸¦å®½
  - location serviceè´Ÿè´£ç®¡ç†accountåˆ°storage stampçš„æ˜ å°„ä¸è¿ç§»ï¼ˆä¸€ä¸ªaccountåªèƒ½æœ‰ä¸€ä¸ªprimary storage stampï¼‰

- storage stampå†…éƒ¨åˆ†ä¸ºä¸‰å±‚ï¼š

  - streamå±‚æä¾›ç±»ä¼¼äºGFSçš„èƒ½åŠ›ã€‚æ•°æ®ç»„ç»‡ä¸ºextentï¼ˆç±»æ¯”chunkï¼‰ï¼Œextentå†ç»„ç»‡ä¸ºstreamï¼ˆç±»æ¯”fileï¼‰ã€‚è¿™ä¸€å±‚æ˜¯ä¸‰ç§æœåŠ¡å…±äº«çš„ã€‚
  - partitionå±‚æä¾›ä¸‰ç§æœåŠ¡ç‰¹æœ‰çš„èƒ½åŠ›ã€‚å®ƒè´Ÿè´£æä¾›åº”ç”¨å±‚æŠ½è±¡ã€namespaceã€äº‹åŠ¡ä¸å¼ºä¸€è‡´çš„èƒ½åŠ›ã€æ•°æ®çš„ç»„ç»‡ã€cacheã€‚partitionå’Œstreamçš„serveræ˜¯éƒ¨ç½²åœ¨ä¸€èµ·çš„ï¼Œè¿™æ ·æœ€å°åŒ–é€šä¿¡æˆæœ¬ã€‚
  - front-endï¼ˆFEï¼‰è´Ÿè´£å¤„ç†è¯·æ±‚ã€‚å®ƒä¼šç¼“å­˜partition mapä»è€Œå¿«é€Ÿè½¬å‘è¯·æ±‚ã€‚å¦å¤–å®ƒè¿˜å¯ä»¥ç›´æ¥è®¿é—®å’Œç¼“å­˜streamå±‚çš„æ•°æ®ã€‚

- storage stampæä¾›äº†ä¸¤ç§replicationï¼š

  - stampå†…éƒ¨ï¼Œåœ¨streamå±‚æä¾›åŒæ­¥çš„replicationï¼Œæä¾›æ•°æ®çš„å¼ºä¸€è‡´æ€§
  - stampä¹‹é—´ï¼Œåœ¨partitionå±‚æä¾›å¼‚æ­¥çš„replicationï¼Œæä¾›æ•°æ®çš„å¤šåœ°å®¹ç¾èƒ½åŠ›

  - åŒºåˆ†ä¸¤ç§replicationè¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯streamå±‚ä¸éœ€è¦æ„ŸçŸ¥global namespaceï¼Œåªéœ€è¦ç»´æŠ¤stampå†…çš„metaï¼Œè¿™æ ·metadataå°±ä¸ä¼šé‚£ä¹ˆå¤šï¼Œæ›´å®¹æ˜“å…¨éƒ¨ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚

- åœ¨streamå±‚æ•°æ®ç»„ç»‡ä¸ºä¸‰å±‚ï¼š

  - blockæ˜¯è¯»å†™çš„æœ€å°å•å…ƒï¼Œä½†ä¸åŒblockå¯ä»¥æœ‰ä¸åŒå¤§å°ã€‚æ¯ä¸ªblockæœ‰è‡ªå·±çš„checksumï¼Œæ¯æ¬¡è¯»éƒ½ä¼šæ ¡éªŒã€‚å¦å¤–æ‰€æœ‰blockå®šæœŸè¿˜ä¼šè¢«åå°æ ¡éªŒchecksum

  - extentæ˜¯streamå±‚replicationçš„å•å…ƒï¼Œå®ƒç”±ä¸€ç³»åˆ—blockç»„æˆã€‚æ¯ä¸ªextentæœ€ç»ˆä¼šé•¿åˆ°1GBå¤§å°ï¼Œpartitionå±‚å¯ä»¥æ§åˆ¶å°†å¤§é‡å°å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªextentï¼Œç”šè‡³ä¸€ä¸ªblockä¸­

  - streamç±»ä¼¼äºä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œä½†å®ƒä¸æ‹¥æœ‰extentï¼Œåªæ˜¯ä¿å­˜äº†è‹¥å¹²ä¸ªæœ‰åºçš„extentå¼•ç”¨ã€‚å°†å·²æœ‰çš„extentç»„ç»‡èµ·æ¥å°±å¯ä»¥å¾—åˆ°æ–°çš„stream

    <img src="../../photos/Unify/image-20220801131930020.png" alt="image-20220801131930020" style="zoom:67%;" />

  - streamå±‚æ˜¯append-onlyçš„ï¼Œæ¯ä¸ªstreamåªæœ‰æœ€åä¸€ä¸ªextentå¯ä»¥è¢«å†™å…¥ï¼Œå…¶å®ƒextentéƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰

- stampå†…éƒ¨æœ‰ä¸¤ç±»ç»„ä»¶ï¼šstream managerï¼ˆSMï¼‰å’Œextent nodeï¼ˆENï¼‰ï¼Œå‰è€…æ˜¯masterï¼Œåè€…æ˜¯data nodeï¼ˆç±»ä¼¼äºGFSï¼‰

  <img src="../../photos/Unify/image-20220801132022652.png" alt="image-20220801132022652" style="zoom: 50%;" />

  - extentæ”¯æŒåŸå­appendå¤šä¸ªblockï¼Œä½†å› ä¸ºé‡è¯•åŸå› å¯èƒ½æ•°æ®ä¼šè¢«å†™å…¥å¤šæ¬¡ï¼Œclientè¦æœ‰èƒ½åŠ›å¤„ç†è¿™ç§æƒ…å†µã€‚

  clientä¼šæ§åˆ¶extentçš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡é˜ˆå€¼åˆ™å‘é€sealæŒ‡ä»¤ã€‚è¢«sealçš„extentä¸å¯å†è¢«å†™å…¥ï¼Œstreamå±‚ä¼šå¯¹sealed extentåšä¸€äº›ä¼˜åŒ–ï¼Œå¦‚ä½¿ç”¨erasure codingç­‰ã€‚

- streamå±‚æä¾›çš„å¼ºä¸€è‡´ä¿è¯ï¼š

  - ä¸€æ—¦å†™å…¥æˆåŠŸçš„æ¶ˆæ¯å‘ŠçŸ¥äº†clientï¼Œåç»­æ‰€æœ‰replicaä¸Šè¿™æ¬¡å†™å…¥çš„æ•°æ®éƒ½å¯è§ï¼ˆread committedï¼‰
  - ä¸€æ—¦extentè¢«sealäº†ï¼Œåç»­æ‰€æœ‰å·²ç»sealçš„replicaçš„è¯»ä¿è¯çœ‹åˆ°ç›¸åŒå†…å®¹ï¼ˆimmutableï¼‰

  - æ¯ä¸ªextentæœ‰ä¸€ä¸ªprimary ENå’Œè‹¥å¹²ä¸ªsecondary ENï¼Œæœªè¢«sealçš„extentçš„ENæ˜¯ä¸ä¼šå˜çš„ï¼Œå› æ­¤å®ƒä»¬ä¹‹é—´ä¸éœ€è¦æœ‰leaseç­‰åŒæ­¥åè®®ã€‚extentçš„å†™å…¥åªèƒ½ç”±primary ENå¤„ç†ï¼Œä½†å¯ä»¥è¯»å–ä»»æ„secondary ENï¼ˆå³ä½¿æœªsealï¼‰ã€‚primaryä¼šå°†æ‰€æœ‰å†™å…¥æ’å¥½åºï¼Œç¡®å®šæ¯ç¬”å†™å…¥çš„offsetï¼Œå†å‘ç»™æ‰€æœ‰secondary ENã€‚æ‰€æœ‰replicaéƒ½å†™æˆåŠŸäº†ä¹‹åprimaryæ‰ä¼šå‘ŠçŸ¥clientã€‚

  - clientåœ¨å†™å…¥è¿‡ç¨‹ä¸­ä¼šæœ¬åœ°ç¼“å­˜extentçš„metaï¼Œä¸éœ€è¦ä¸SMé€šä¿¡ï¼ˆç›´åˆ°éœ€è¦åˆ†é…æ–°extentï¼‰ã€‚å¦‚æœæŸæ¬¡å†™å…¥å¤±è´¥äº†ï¼Œclientå¯ä»¥è¦æ±‚SMæ¥sealè¿™ä¸ªextentï¼Œç„¶åç«‹å³å¼€å§‹å†™æ–°extentï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ—§extentæœ«å°¾æ˜¯å¦æœ‰æ•°æ®ä¸ä¸€è‡´ã€‚

  - sealè¿‡ç¨‹ä¸­SMä¼šä¸æ¯ä¸ªreplica ENé€šä¿¡ï¼Œå¹¶ä½¿ç”¨å¯ç”¨çš„ENä¸­æœ€å°çš„commit lengthã€‚è¿™æ ·èƒ½ä¿è¯æ‰€æœ‰å‘ŠçŸ¥è¿‡clientçš„æ•°æ®éƒ½ä¸ä¼šä¸¢ï¼Œä½†æœ‰å¯èƒ½ä¼šæœ‰æ•°æ®è¿˜æ²¡æ¥å¾—åŠå‘ŠçŸ¥clientã€‚è¿™æ˜¯clientéœ€è¦è‡ªå·±å¤„ç†çš„ä¸€ç§æƒ…å†µã€‚ï¼ˆæ˜¯ä¸æ˜¯å¯ä»¥è®©clientç¼“å­˜ä¸€ä¸ªcommit lengthï¼Œsealæ—¶å‘ŠçŸ¥SMï¼‰

  - clientåœ¨è¯»å¤šå‰¯æœ¬çš„extentæ—¶å¯ä»¥è®¾ç½®ä¸€ä¸ªdeadlineï¼Œè¿™æ ·ä¸€æ—¦å½“å‰ENæ— æ³•åœ¨deadlineä¹‹å‰è¯»åˆ°æ•°æ®ï¼Œclientè¿˜æœ‰æœºä¼šè¯»å¦ä¸€ä¸ªENã€‚è€Œåœ¨è¯»erasure codedæ•°æ®æ—¶ï¼Œclientä¹Ÿå¯ä»¥è®¾ç½®deadlineï¼Œè¶…è¿‡deadlineåå‘æ‰€æœ‰fragmentå‘é€è¯»è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨æœ€å…ˆè¿”å›çš„Nä¸ªfragmenté‡æ–°è®¡ç®—ç¼ºå°‘çš„æ•°æ®ã€‚

- WASè¿˜å®ç°äº†è‡ªå·±çš„I/Oè°ƒåº¦å™¨ï¼Œå¦‚æœæŸä¸ªspindleå·²ç»è°ƒåº¦çš„I/Oè¯·æ±‚é¢„è®¡è¶…è¿‡100msï¼Œæˆ–æœ‰å•ä¸ªI/Oå·²ç»æ’é˜Ÿè¶…è¿‡200msï¼Œè°ƒåº¦å™¨å°±ä¸å†å‘è¿™ä¸ªspindleå‘é€æ–°çš„I/Oè¯·æ±‚ã€‚è¿™æ ·ç‰ºç‰²äº†ä¸€äº›å»¶æ—¶ï¼Œä½†è¾¾åˆ°äº†æ›´å¥½çš„å…¬å¹³æ€§

  - ä¸ºäº†è¿›ä¸€æ­¥åŠ é€ŸI/Oï¼ŒENä¼šä½¿ç”¨å•ç‹¬çš„ä¸€å—ç›˜ï¼ˆHDDæˆ–SSDï¼‰ä½œä¸ºjournal driveï¼Œå†™å…¥è¿™å°ENçš„æ•°æ®ä¼šåŒæ—¶appendåˆ°journal driveä¸Šï¼Œä»¥åŠæ­£å¸¸å†™extentï¼Œå“ªç¬”å†™å…ˆå®Œæˆéƒ½å¯ä»¥è¿”å›ã€‚å†™å…¥journal driveçš„æ•°æ®è¿˜ä¼šç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æ•°æ®å†™extentæˆåŠŸï¼ˆé˜¿é‡Œäº‘çš„panguä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹æ¡ˆï¼‰ã€‚journal driveæ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼š
    - å°†å¤§é‡éšæœºå†™è½¬æ¢ä¸ºäº†é¡ºåºå†™ã€‚é™¤äº†å†™journal driveå¤©ç„¶æ˜¯é¡ºåºçš„ï¼Œè¿™ç§è®¾è®¡è¿˜ä½¿å¾—å†™extentæ—¶å¯ä»¥ä½¿ç”¨æ›´å€¾å‘batchçš„I/Oè°ƒåº¦ç­–ç•¥ï¼Œè¿›ä¸€æ­¥æé«˜äº†ç£ç›˜å¸¦å®½çš„åˆ©ç”¨ç‡ã€‚
    - å…³é”®è·¯å¾„ä¸Šè¯»å†™è¯·æ±‚åˆ†ç¦»ï¼Œå‰è€…è¯»æ•°æ®ç›˜ï¼ˆæˆ–cacheï¼‰ï¼Œåè€…å†™journal driveã€‚

  - ä½¿ç”¨äº†journal driveå¯ä»¥æå¤§é™ä½I/Oçš„å»¶æ—¶æ³¢åŠ¨ç‡ï¼ˆå¯¹åœ¨çº¿ä¸šåŠ¡æ„ä¹‰é‡å¤§ï¼‰ã€‚

- Partitionå±‚è®¾è®¡ç±»ä¼¼äºBigTableï¼Œæ•°æ®ä¿å­˜åœ¨äº†ä¸åŒçš„Object Tableï¼ˆOTï¼‰ä¸­ï¼Œæ¯ä¸ªOTåˆ†ä¸ºè‹¥å¹²ä¸ªRangePartitionã€‚OTåŒ…æ‹¬ï¼š

  - Account Tableï¼ŒBlob Tableï¼ŒEntity Tableï¼ŒMessage Tableï¼ŒSchema Tableï¼ŒPartition Map Table

- Partitionå±‚çš„æ¶æ„ï¼š

  - Partition Managerï¼ˆPMï¼‰ï¼šç±»ä¼¼äºBigTableçš„Masterï¼Œç®¡ç†æ‰€æœ‰RangePartition
  - Partition Serverï¼ˆPSï¼‰ï¼šç±»ä¼¼äºBigTableçš„Tablet Serverï¼ŒåŠ è½½RangePartitionï¼Œå¤„ç†è¯·æ±‚
  - Lock Serviceï¼šç±»ä¼¼äºChubby

  <img src="../../photos/Unify/image-20220801132405718.png" alt="image-20220801132405718" style="zoom:50%;" />                <img src="../../photos/Unify/image-20220801132436085.png" alt="image-20220801132436085" style="zoom:50%;" />

  

- Blob Tableå¤§å—æ•°æ®è¿›commit logï¼Œä½†ä¸è¿›å…¥row dataï¼ˆä¸è¿›cacheã€ä¸å‚ä¸å¸¸è§„compactionç­‰ï¼‰ï¼Œç›¸årow dataä¸­åªè®°å½•æ•°æ®çš„ä½ç½®ï¼ˆextent+offsetï¼‰ï¼Œå¹¶ä¸”åœ¨checkpointçš„æ—¶å€™ç›´æ¥ç”¨commit logçš„extentæ‹¼è£…æˆdata stream

- RangePartitionçš„åˆ†è£‚ï¼ˆSplitï¼‰è¿‡ç¨‹ï¼š

  - PMå‘PSå‘è¯·æ±‚ï¼Œè¦æ±‚å°†Båˆ†è£‚ä¸ºCå’ŒD
  - PSç”ŸæˆBçš„checkpointï¼Œç„¶åBåœæ­¢æœåŠ¡ï¼ˆæ­¤æ—¶æ˜¯ä¸æ˜¯å¯ä»¥ä¸åœè¯»ï¼‰
  - PSä½¿ç”¨Bçš„æ‰€æœ‰streamçš„extentç»„è£…æˆCå’ŒDçš„stream
  - Cå’ŒDå¼€å§‹æœåŠ¡ï¼ˆclientè¿˜ä¸çŸ¥é“Cå’ŒDï¼Œæ­¤æ—¶åº”è¯¥ä¸ä¼šæœ‰è¯·æ±‚å‘è¿‡æ¥ï¼‰
  - PSå‘ŠçŸ¥PMåˆ†è£‚ç»“æœï¼ŒPMæ›´æ–°Partition Map Tableï¼Œä¹‹åå°†å…¶ä¸­ä¸€ä¸ªæ–°Partitionç§»åˆ°å¦ä¸€å°PSä¸Šï¼ˆåˆ†æ•£å‹åŠ›ï¼‰

- åˆå¹¶ï¼ˆMergeï¼‰è¿‡ç¨‹ç±»ä¼¼ï¼š

  - PMå°†Cå’ŒDç§»åŠ¨åˆ°ç›¸åŒPSä¸Šï¼Œä¹‹åå‘ŠçŸ¥PSå°†Cå’ŒDåˆå¹¶ä¸ºE
  - PSç”ŸæˆCå’ŒDçš„checkpointï¼Œä¹‹åCå’ŒDåœæ­¢æœåŠ¡
  - PSä½¿ç”¨Cå’ŒDçš„streamçš„extentç»„è£…ä¸ºEçš„streamï¼Œæ¯ä¸ªstreamä¸­Cçš„extentåœ¨Dä¹‹å‰
  - PSç”ŸæˆEçš„metadata streamï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ–°çš„streamçš„åå­—ã€key rangeã€Cå’ŒDçš„commit logçš„startå’Œendä½ç½®ã€æ–°çš„data streamçš„root index
  - Eå¼€å§‹æœåŠ¡
  - PSå‘ŠçŸ¥PMåˆå¹¶ç»“æœ

- æœ€åæ˜¯ä¸€äº›ç»éªŒæ•™è®­çš„æ€»ç»“ï¼š

  - è®¡ç®—å­˜å‚¨åˆ†ç¦»ï¼šå¥½å¤„æ˜¯å¼¹æ€§ã€éš”ç¦»æ€§ï¼Œä½†å¯¹ç½‘ç»œæ¶æ„æœ‰è¦æ±‚ï¼Œéœ€è¦ç½‘ç»œæ‹“æ‰‘æ›´å¹³å¦ã€ç‚¹å¯¹ç‚¹çš„åŒå‘å¸¦å®½æ›´é«˜ç­‰
  - Range vs Hashï¼šWASä½¿ç”¨Rangeçš„ä¸€ä¸ªåŸå› æ˜¯å®ƒæ›´å®¹æ˜“å®ç°æ€§èƒ½ä¸Šçš„éš”ç¦»ï¼ˆå¤©ç„¶å…·æœ‰å±€éƒ¨æ€§ï¼‰ï¼Œå¦å¤–å®¢æˆ·å¦‚æœéœ€è¦hashï¼Œæ€»æ˜¯å¯ä»¥åŸºäºRangeè‡ªå·±å®ç°ï¼Œè€Œåè¿‡æ¥åˆ™ä¸ç„¶ã€‚
  - æµæ§ï¼ˆThrottlingï¼‰ä¸éš”ç¦»ï¼ˆIsolationï¼‰ã€‚WASä½¿ç”¨äº†SimpleHoldç®—æ³•[[2](https://dl.acm.org/doi/abs/10.1145/633025.633056)]æ¥è®°å½•è¯·æ±‚æœ€å¤šçš„Nä¸ªAccountNameå’ŒPartitionNameã€‚å½“éœ€è¦æµæ§æ—¶ï¼ŒPSä¼šä½¿ç”¨è¿™ä¸ªä¿¡æ¯æ¥é€‰æ‹©æ€§æ‹’ç»è¯·æ±‚ï¼Œå¤§æ¦‚åŸåˆ™æ˜¯è¯·æ±‚è¶Šå¤šï¼Œè¢«æ‹’ç»æ¦‚ç‡è¶Šå¤§ï¼ˆä¿æŠ¤å°ç”¨æˆ·ï¼‰ã€‚è€ŒWASä¼šæ±‡æ€»æ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯æ¥åˆ¤æ–­å“ªäº›accountæœ‰é—®é¢˜ï¼ˆå¼‚å¸¸è®¿é—®ï¼‰ï¼Œå¦‚æœLoadBalanceè§£å†³ä¸äº†å°±æ›´é«˜å±‚é¢ä¸Šæ§åˆ¶è¿™ç§ç”¨æˆ·çš„æµé‡
  - è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼ˆLoadBalancingï¼‰ï¼šWASä¸€å¼€å§‹ä½¿ç”¨å•ç»´åº¦â€œloadâ€ï¼ˆå»¶æ—¶*è¯·æ±‚é€Ÿç‡ï¼‰æ¥å‡è¡¡ï¼Œä½†æ— æ³•åº”å¯¹å¤æ‚åœºæ™¯ã€‚ç°åœ¨çš„å‡è¡¡ç®—æ³•æ˜¯æ¯Nç§’æ”¶é›†æ‰€æœ‰Partitionçš„ä¿¡æ¯ï¼Œç„¶ååŸºäºæ¯ä¸ªç»´åº¦æ’åºï¼Œæ‰¾å‡ºéœ€è¦åˆ†è£‚çš„Partitionã€‚ä¹‹åPMå†å°†PSæŒ‰å„ç»´åº¦æ’åºï¼Œæ‰¾å‡ºè´Ÿè½½è¿‡é‡çš„PSï¼Œå°†å…¶ä¸­ä¸€éƒ¨åˆ†Partitionç§»åˆ°ç›¸å¯¹ç©ºé—²çš„PSä¸Šï¼ˆæ•´ä½“æ€è·¯ä¸Tablestoreçš„LoadBalanceå·®ä¸å¤šï¼Œæ›´ç³»ç»ŸåŒ–ä¸€äº›ï¼Œä½†Tablestoreçš„LoadBalanceç­–ç•¥æ›´å¤šï¼Œæ›´çµæ´»ï¼‰
  - æ¯ä¸ªPartitionä½¿ç”¨è‡ªå·±çš„log fileã€‚è¿™ç‚¹ä¸BigTableçš„æ•´ä¸ªTablet Serverå…±äº«log fileåŒºåˆ«æ¯”è¾ƒå¤§ã€‚å•ç‹¬log fileåœ¨load/unloadä¸Šæ›´å¿«ï¼Œä¸”éš”ç¦»æ€§æ›´å¥½ï¼Œè€Œå…±äº«log fileæ›´èŠ‚çœI/Oï¼ˆç»¼åˆæ¥çœ‹å•ç‹¬log fileæ›´å¥½ä¸€äº›ï¼Œå°¤å…¶æ˜¯éšç€å­˜å‚¨æ€§èƒ½çš„æå‡ã€è®¡ç®—å­˜å‚¨åˆ†ç¦»æ¶æ„çš„æµè¡Œï¼Œå…±äº«log fileçš„ä¼˜åŠ¿è¶Šæ¥è¶Šå°ï¼ŒåŠ£åŠ¿è¶Šæ¥è¶Šå¤§äº†ï¼‰ã€‚
  - Journal driveã€‚å®ƒçš„æ„ä¹‰æ˜¯é™ä½I/Oæ³¢åŠ¨ã€‚BigTableä½¿ç”¨äº†å¦ä¸€ç§æ–¹æ¡ˆï¼Œç”¨2ä¸ªlogæ¥è§„é¿é•¿I/Oï¼Œä½†å¯¼è‡´äº†æ›´å¤šçš„ç½‘ç»œæµé‡ä¸æ›´é«˜çš„ç®¡ç†æˆæœ¬
  - Append-only
  - End-to-end checksum
  - Upgradeã€‚é‡ç‚¹æ˜¯åœ¨æ¯ä¸€å±‚å°†èŠ‚ç‚¹åˆ†ä¸ºè‹¥å¹²ä¸ªupgrade domainï¼Œå†ä½¿ç”¨rolling upgradeæ¥æ§åˆ¶upgradeçš„å½±å“ã€‚
  - **åŸºäºç›¸åŒStackçš„å¤šç§æ•°æ®æŠ½è±¡**ã€‚æˆ‘ä»¬çš„ç³»ç»Ÿæ”¯æŒä»åŒä¸€å­˜å‚¨ä¸­æå–ä¸‰ç§ä¸åŒçš„æ•°æ®å †æ ˆï¼šBlobã€è¡¨å’Œé˜Ÿåˆ—ï¼ˆåŒ…æ‹¬å—å­˜å‚¨ï¼‰ã€‚ è¿™ç§è®¾è®¡ä½¿æ‰€æœ‰æ•°æ®æŠ½è±¡æ¥ä½¿ç”¨ç›¸åŒçš„å†…éƒ¨æ ‡è®°å’Œæ ‡è®°é—´å¤åˆ¶ï¼Œä½¿ç”¨ç›¸åŒçš„è´Ÿè½½å‡è¡¡ç³»ç»Ÿï¼Œå¹¶å®ç°å—ç›Šäºæµå’Œåˆ†åŒºå±‚çš„æ”¹è¿›ã€‚ åœ¨æ­¤å¤–ï¼Œç”±äº Blobã€Tables å’Œé˜Ÿåˆ—ä¸åŒï¼Œæˆ‘ä»¬çš„å•æ ˆæ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡åœ¨åŒä¸€ç»„ç¡¬ä»¶ä¸Šè¿è¡Œæ‰€æœ‰æœåŠ¡æ¥é™ä½æˆæœ¬ã€‚Blob ä½¿ç”¨å¤§é‡ç£ç›˜å®¹é‡ï¼Œè¡¨ä½¿ç”¨ I/O ä¸»è½´ä»èŠ‚ç‚¹ä¸Šçš„è®¸å¤šç£ç›˜ï¼ˆä½†ä¸éœ€è¦é‚£ä¹ˆå¤šå®¹é‡ä¸º Blobï¼‰ï¼Œè€Œé˜Ÿåˆ—ä¸»è¦åœ¨å†…å­˜ä¸­è¿è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸ä»…èåˆäº†ä¸åŒå®¢æˆ·çš„å…±äº«èµ„æºä¸Šçš„å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æ··åˆå°† Blobã€Table å’Œ Queue æµé‡æ”¾åœ¨åŒä¸€ç»„å­˜å‚¨èŠ‚ç‚¹
  - ä½¿ç”¨é¢„å®šä¹‰çš„Object Tableï¼Œè€Œä¸å…è®¸åº”ç”¨å®šä¹‰è‡ªå·±çš„Tableã€‚æ„ä¹‰åœ¨äºæ›´å®¹æ˜“ç»´æŠ¤
  - é™åˆ¶æ¯ä¸ªBucketå¤§å°ä¸º100TBã€‚è¿™ä¸ªæ˜¯æ•™è®­ï¼ŒWASè®¡åˆ’å¢å¤§å•ä¸ªstorage stamp
  - CAPã€‚WASè®¤ä¸ºè‡ªå·±åœ¨å®è·µå±‚é¢ä¸ŠåŒæ—¶å®ç°äº†Cå’ŒAï¼ˆé«˜å¯ç”¨ã€å¼ºä¸€è‡´ï¼‰ï¼Œå…·ä½“ç­–ç•¥ä¸Šæ˜¯é€šè¿‡åˆ‡æ¢æ–°extentæ¥è§„é¿æ‰ä¸å¯è®¿é—®çš„èŠ‚ç‚¹ï¼ˆå®è·µä¸Šæœ‰æ„ä¹‰ï¼Œä½†ä¹Ÿä¸èƒ½è¯´æ˜¯åŒæ—¶å®ç°äº†Cå’ŒAï¼‰ã€‚å¦å¤–[[3](https://static.usenix.org/events/osdi04/tech/full_papers/renesse/renesse.pdf)]è¡¨ç¤ºä½¿ç”¨chain replicationå°±å¯ä»¥åŒæ—¶å®ç°é«˜å¯ç”¨å’Œå¼ºä¸€è‡´ã€‚
  - é«˜æ€§èƒ½çš„debug logã€‚è¿™ç‚¹å¾ˆé‡è¦
  - å‹åŠ›ç‚¹æµ‹è¯•ã€‚WASå¯ä»¥å•ç‹¬æµ‹è¯•å¤šä¸ªé¢„å®šä¹‰çš„å‹åŠ›ç‚¹ï¼ˆå¦‚checkpointã€splitã€mergeã€gcç­‰ï¼‰ã€‚ï¼ˆé™¤æ­¤ä¹‹å¤–ç°åœ¨è¿˜éœ€è¦è€ƒè™‘chaos testï¼‰

### è®ºæ–‡2 (Facebook) Facebookâ€™s Tectonic Filesystem: Efficiency from Exascale

- èƒŒæ™¯

  - é—®é¢˜1ï¼šä¸šåŠ¡ç±»å‹éœ€æ±‚ä¸ä¸€è‡´ï¼Œæœ‰çš„æ˜¯IOPSæ•æ„Ÿå‹ï¼Œæœ‰çš„æ˜¯ååæ•æ„Ÿå‹ï¼Œå½“å‰facebookä¸åŒçš„ä¸šåŠ¡ç±»å‹ä½¿ç”¨ç‹¬ç«‹çš„é›†ç¾¤å¯¼è‡´ä¸èƒ½åŒæ—¶å……åˆ†åˆ©ç”¨é›†ç¾¤çš„ååå’ŒIOPSèµ„æºï¼Œé€ æˆèµ„æºæµªè´¹
  - é—®é¢˜2ï¼šå¯¹äºä¸€äº›æ•°æ®ä»“åº“ä¸šåŠ¡ï¼Œé€šå¸¸å…¶å®¹é‡éœ€æ±‚å·¨å¤§ï¼Œå•ä¸ªé›†ç¾¤æ— æ³•æ»¡è¶³ï¼Œæ‰€ä»¥ä¸€ä¸ªæ•°æ®ä»“åº“çš„æ•°æ®éœ€è¦å­˜å‚¨åœ¨å¤šä¸ªå°é›†ç¾¤ä¸­ï¼Œè¿™ç§æ–¹å¼ä½¿å¾—æ•°æ®å¤„ç†å¤æ‚åº¦æå‡äº†ã€‚

- Tectonic ä¸»è¦ç‰¹ç‚¹

  - åŒä¸€é›†ç¾¤å¯ä»¥æä¾›ä¸åŒä¸šåŠ¡éœ€æ±‚çš„æœåŠ¡	
  - å•ä¸ªé›†ç¾¤èƒ½å¤Ÿè¾¾åˆ°EBçº§åˆ«çš„æ‰©å±•èƒ½åŠ›

- èµ„æºå¹³è¡¡

  - èµ„æºåˆ†ç±»

    - Tectonicå°†èµ„æºåˆ’åˆ†ä¸ºï¼š non-ephemeral and ephemeralã€‚å¯ä»¥ç†è§£ä¸ºå¯é‡å¤ä½¿ç”¨çš„å’Œä¸å¯é‡å¤ä½¿ç”¨çš„ï¼Œå¯¹äºå­˜å‚¨èµ„æºï¼Œä¸€æ—¦åˆ†é…ç»™ä¸€ä¸ªç§Ÿæˆ·å°±ä¸èƒ½å†åˆ†é…ç»™å…¶ä»–ç§Ÿæˆ·äº†ï¼Œé‚£ä¹ˆä»–å°±æ˜¯ä¸å¯é‡å¤ä½¿ç”¨çš„ï¼Œæ˜¯ä¸€ä¸ªé•¿æœŸå ç”¨çš„èµ„æºã€‚ä½†æ˜¯å¯¹äºIOPSè¿™æ ·çš„èµ„æºï¼Œç§Ÿæˆ·åªä¼šåœ¨å‘è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨åˆ°ï¼Œå¹¶ä¸”è¿™ä¸ªè¯·æ±‚ç»“æŸåIOPSèµ„æºå°±è¢«é‡Šæ”¾å‡ºæ¥äº†ï¼Œä»–æ˜¯ä¸€ä¸ªæš‚æ—¶çš„å ç”¨ï¼ˆå¤§å¤šæ•°äº‘å‚å•†é€šå¸¸éƒ½æ˜¯IOPSè¶…å”®ï¼Œå­˜å‚¨èµ„æºä¸è¶…å”®ï¼‰

    - å› æ­¤ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬èƒ½å¤Ÿåšæ–‡ç« çš„ä¹Ÿå°±æ˜¯è¿™äº›non-ephemeralçš„èµ„æºã€‚è¿™é‡Œçš„æŒ‘æˆ˜åœ¨äºï¼Œé¦–å…ˆæˆ‘ä»¬æ—¢è¦æ»¡è¶³æ¯ä¸ªç”¨æˆ·çš„æœ€åŸºæœ¬çš„å­˜å‚¨éœ€æ±‚ï¼Œå¦å¤–è¿˜éœ€è¦ç»™ä¸åŒç±»å‹çš„ç”¨æˆ·æä¾›ç¬¦åˆå…¶ä¸šåŠ¡ç±»å‹éœ€æ±‚çš„ä¼˜åŒ–ã€‚

  - ç”¨æˆ·åˆ†ç±»
    - TectonicæœåŠ¡çš„applicationæ•°ç™¾ä¸ªï¼Œæ‰€ä»¥åœ¨è¿›è¡Œèµ„æºè°ƒåº¦çš„æ—¶å€™å¦‚æœä»¥applicationä¸ºç²’åº¦ï¼Œé‚£ä¹ˆæ•´ä¸ªè°ƒåº¦ä¼šå¼‚å¸¸å¤æ‚ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ç®€åŒ–èµ„æºè°ƒåº¦ï¼Œä¸æŒ‰applicationåˆ†ç±»ï¼ŒæŒ‰ç…§traffic groupåˆ†ç±»
    - åŒä¸€traffic groupé‡Œçš„applicationå…¶èµ„æºéœ€æ±‚ç›¸ä¼¼ï¼Œåœ¨å•ä¸ªé›†ç¾¤ä¸­ï¼Œtectonicæ”¯æŒ50å¤šç§traffic group
    - ä¸€ä¸ªtraffic groupå¯¹åº”ä¸€ä¸ªtrafficClassï¼ŒtrafficClassä»£è¡¨è¯¥groupå¯¹äºè¯·æ±‚latencyçš„æ•æ„Ÿç¨‹åº¦ï¼Œè¿™é‡Œåˆ†ä¸ºé‡‘ã€é“¶ã€é“œä¸‰ä¸ªç­‰çº§ï¼Œå¯¹åº”çš„å»¶æ—¶æ•æ„Ÿæ€§ä»é«˜åˆ°ä½ï¼ŒåŒæ—¶ä¹Ÿå¯¹åº”äº†å…¶IOä¼˜å…ˆçº§ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªä¸åŒç­‰çº§å½±å“çš„IOä¼˜å…ˆçº§ä»…é™äºé‚£äº›å¯Œä½™çš„IOPSèµ„æºã€‚å¦‚æœè¿™ä¸ªé›†ç¾¤çš„åœ¨æœåŠ¡å½“å‰æ‰€æœ‰ç§Ÿæˆ·æ²¡æœ‰ç›ˆä½™ï¼Œè¿™äº›é‡‘é“¶é“œç­‰çº§å°±æ²¡æœ‰æ„ä¹‰ï¼Œè¿™ç‚¹å…¶å®å¾ˆç±»ä¼¼mclockçš„è°ƒåº¦æ¨¡å¼

  - è°ƒåº¦ç­–ç•¥
    - å½“ä¸€ä¸ªè¯·æ±‚ä¸‹å‘æ—¶ï¼Œåœ¨clientç«¯éœ€è¦å…ˆç»è¿‡æ¼æ¡¶ï¼Œå‘ŠçŸ¥è‡ªå·±éœ€è¦å¤šå°‘çš„èµ„æºï¼Œclientæ£€æŸ¥è‡ªå·±çš„trafficgroupçš„èµ„æºå¤Ÿä¸å¤Ÿè¿™æ¬¡IOï¼Œå¤Ÿçš„è¯å°±å°†è¯·æ±‚ä¸‹å‘åˆ°åº•å±‚å­˜å‚¨èŠ‚ç‚¹(tectonicä¸ä»…å¯¹å­˜å‚¨èŠ‚ç‚¹è¿›è¡Œäº†èµ„æºå¹³è¡¡è°ƒåº¦ï¼ŒåŒæ—¶ä¹Ÿå¯¹å…ƒæ•°æ®èŠ‚ç‚¹ä¹Ÿæœ‰ä¸€è‡´çš„ä¼˜åŒ–)ï¼Œå­˜å‚¨èŠ‚ç‚¹é‡‡ç”¨æƒé‡è½®è®­(WRR)çš„æ–¹å¼ï¼Œä¾æ¬¡å¤„ç†åˆ°æ¥çš„è¯·æ±‚
    - åœ¨å­˜å‚¨èŠ‚ç‚¹è°ƒåº¦IOæ—¶æœ‰å¦‚ä¸‹ä¸‰ä¸ªä¼˜åŒ–ï¼š
      1. å¦‚æœä¸€ä¸ªä½ä¼˜å…ˆçº§çš„IOå…¶å¤„ç†æ—¶é—´è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼ŒWRRä¼šè½¬è®©æœ¬æ¬¡æ‰§è¡Œæƒé™ç»™é«˜ä¼˜å…ˆçº§çš„IOï¼Œè¿™ä¸ªç­–ç•¥é˜²æ­¢é«˜ä¼˜å…ˆçº§è¢«ä½ä¼˜å…ˆçº§IOé˜»å¡
      2. å¯¹äºéé‡‘ç‰Œä¼˜å…ˆçº§çš„IOï¼Œåœ¨å­˜å‚¨èŠ‚ç‚¹ä¼šé™åˆ¶å…¶inflight IOæ•°é‡ã€‚åœ¨è¾¾åˆ°éé‡‘ç‰ŒIO inflightä¸Šé™æ—¶ï¼Œå¦‚æœæœ‰é‡‘ç‰ŒIOéœ€è¦å¤„ç†ï¼Œéƒ½ä¼šå…ˆå¤„ç†é‡‘ç‰ŒIOï¼Œå†è¿›æ¥çš„éé‡‘ç‰ŒIOéƒ½ä¼šè¢«é˜»å¡
      3. ç£ç›˜æœ¬èº«ä¹Ÿå¯ä»¥å‚ä¸é‡æ’è¯·æ±‚é¡ºåºï¼Œå¦‚æœä¸€ä¸ªé‡‘ç‰ŒIOå·²ç»åœ¨ç£ç›˜pendingå¤ªä¹…è¶…å‡ºé˜ˆå€¼ï¼Œtectonicä¼šåœæ­¢è°ƒåº¦éé‡‘ç‰ŒIO

- æ¶æ„ ï¼ˆç•¥ï¼‰

  - å¯¹äºä¸€ä¸ªé›†ç¾¤æä¾›EBçº§åˆ«çš„å­˜å‚¨èƒ½åŠ›ï¼Œåœ¨å°æ–‡ä»¶åœºæ™¯ä¸‹ï¼Œå…ƒæ•°æ®é‡ä¼šå¾ˆåºå¤§ï¼Œéœ€è¦æœ‰èƒ½åŠ›ä¿è¯éšç€å­˜å‚¨æ•°æ®é‡å¢åŠ å¸¦æ¥çš„å…ƒæ•°æ®é‡è†¨èƒ€ï¼Œéœ€è¦å…ƒæ•°æ®å­˜å‚¨å…·å¤‡åŒæ ·çš„å¼ºæ‚çš„æ‰©å±•èƒ½åŠ›
  - å…ƒæ•°æ®ç®¡ç†ä¼˜åŒ–

- Design and Deployment Lessons è®¾è®¡å’Œéƒ¨ç½²ç»éªŒæ€»ç»“

  - Achieving high scalability is an iterative process enabled by a microservice architecture. å®ç°é«˜å¯æ‰©å±•æ€§æ˜¯ä¸€ä¸ªç”±å¾®æœåŠ¡æ¶æ„æ”¯æŒçš„è¿­ä»£è¿‡ç¨‹
    - å‡ ä¸ªæ„é€ ç»„ä»¶å·²ç»é€šè¿‡å¤šæ¬¡è¿­ä»£æ¥æ»¡è¶³ä¸æ–­å¢åŠ çš„å¯æ‰©å±•æ€§è¦æ±‚ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å—å­˜å‚¨åˆ†ç»„å—ä»¥å‡å°‘å…ƒæ•°æ®ã€‚è‹¥å¹²
      å…·æœ‰ç›¸åŒå†—ä½™æ–¹æ¡ˆçš„å—è¢«åˆ†ç»„å¹¶RSç¼–ç ä¸ºä¸€ä¸ªå•å…ƒä»¥å°†å®ƒä»¬çš„å—å­˜å‚¨åœ¨ä¸€èµ·ã€‚æ¯ä¸ªå—ç»„æ˜ å°„åˆ°ä¸€ç»„å­˜å‚¨èŠ‚ç‚¹ã€‚è¿™æ˜¯ä¸€ç§å¸¸ç”¨æŠ€æœ¯ï¼Œå› ä¸ºå®ƒæ˜¾ç€å‡å°‘äº†å…ƒæ•°æ®ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒæ¥è¯´å¤ªä¸çµæ´»äº†ã€‚ä¸ºäº†ä¾‹å¦‚ï¼Œåªæœ‰ 5% çš„å­˜å‚¨èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œ80% çš„å—ç»„æ— æ³•å†™å…¥ã€‚è¿™ç§è®¾è®¡è¿˜æ’é™¤äº†å¯¹å†²ä»²è£å†™å…¥ç­‰ä¼˜åŒ–å’Œæ³•å®šäººæ•°é™„åŠ ï¼ˆÂ§5ï¼‰
    - æ­¤å¤–ï¼Œæˆ‘ä»¬æœ€åˆçš„å…ƒæ•°æ®å­˜å‚¨æ¶æ„æ²¡æœ‰åˆ†ç¦»åç§°å±‚å’Œæ–‡ä»¶å±‚ï¼›å®¢æˆ·å’¨è¯¢äº†ç›¸åŒçš„ç”¨äºç›®å½•æŸ¥æ‰¾å’Œåœ¨æ–‡ä»¶ä¸­åˆ—å‡ºå—çš„åˆ†ç‰‡ã€‚
      è¿™ç§è®¾è®¡å¯¼è‡´å…ƒæ•°æ®çƒ­ç‚¹ä¸å¯ç”¨ï¼Œä¿ƒä½¿æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†è§£å…ƒæ•°æ®
    - æ„é€ çš„æ¼”å˜è¡¨æ˜å°è¯•æ–°äº‹ç‰©çš„é‡è¦æ€§è®¾è®¡ä»¥æ›´æ¥è¿‘æ€§èƒ½ç›®æ ‡ã€‚æˆ‘ä»¬çš„å‘å±•ç»éªŒä¹Ÿæ˜¾ç¤ºäº†åŸºäºå¾®æœåŠ¡çš„ä»·å€¼å®éªŒæ¶æ„ï¼šæˆ‘ä»¬å¯ä»¥å¯¹ç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†é€æ˜åœ°è¿­ä»£ç»„ä»¶ã€‚å†…å­˜æŸååœ¨è§„æ¨¡ä¸Šå¾ˆå¸¸è§ã€‚åœ¨æ„é€ çš„è§„æ¨¡ï¼Œæ•°åƒå°æœºå™¨è¯»å†™å¤§é‡æ¯å¤©çš„æ•°æ®é‡ï¼Œå†…å­˜æ•°æ®æŸåæ˜¯ç»å¸¸å‘ç”Ÿçš„ï¼Œåœ¨å…¶ä»–å¤§è§„æ¨¡è§‚å¯Ÿåˆ°çš„ç°è±¡ç³»ç»Ÿã€‚æˆ‘ä»¬é€šè¿‡æ‰§è¡Œæ ¡éªŒå’Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜æ£€æŸ¥è¿›ç¨‹è¾¹ç•Œä¹‹å†…å’Œä¹‹é—´
    - Tectonic ç»´æŠ¤æ•°æ®å®Œæ•´æ€§çš„æˆæœ¬ã€‚æ‰€æœ‰æ¶‰åŠç§»åŠ¨ã€å¤åˆ¶æˆ–è½¬æ¢æ•°æ®çš„ API è¾¹ç•Œéƒ½å¿…é¡»è¿›è¡Œæ”¹é€ ï¼Œä»¥åŒ…å«æ ¡éªŒå’Œä¿¡æ¯ã€‚å®¢æˆ·ç«¯åœ¨å†™å…¥æ—¶å°†å¸¦æœ‰æ•°æ®çš„æ ¡éªŒå’Œä¼ é€’ç»™å®¢æˆ·ç«¯åº“ï¼ŒTectonic éœ€è¦é€šè¿‡æ ¡éªŒå’Œä¸ä»…è·¨è¶Šæµç¨‹è¾¹ç•Œï¼ˆä¾‹å¦‚ï¼Œåœ¨å®¢æˆ·ç«¯ä¹‹é—´åº“å’Œå­˜å‚¨èŠ‚ç‚¹ï¼‰ä½†ä¹Ÿåœ¨è¿›ç¨‹å†…ï¼ˆä¾‹å¦‚ï¼Œæ”¹é€ åï¼‰ã€‚æ£€æŸ¥è½¬æ¢çš„å®Œæ•´æ€§å¯é˜²æ­¢æŸåä¼ æ’­åˆ°é‡å»ºå­˜å‚¨èŠ‚ç‚¹æ•…éšœåçš„å—

- Services that do not use Tectonicï¼ŒFacebook ä¸­çš„æŸäº›æœåŠ¡ä¸ä½¿ç”¨ Tectonic è¿›è¡Œå­˜å‚¨

  - Bootstrap å¼•å¯¼æœåŠ¡ï¼Œä¾‹å¦‚è½¯ä»¶äºŒè¿›åˆ¶åŒ…éƒ¨ç½²ç³»ç»Ÿï¼Œå¿…é¡»æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œä¸èƒ½ä½¿ç”¨ Tectonicï¼Œå› ä¸ºå®ƒä¾èµ–äºè®¸å¤šå…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚ï¼Œé”®å€¼å­˜å‚¨ã€é…ç½®ç®¡ç†ç³»ç»Ÿã€éƒ¨ç½²ç®¡ç†ç³»ç»Ÿï¼‰
  - Graphå­˜å‚¨ä¹Ÿæ²¡æœ‰ä½¿ç”¨ Tectonicï¼Œå› ä¸º Tectonic å°šæœªé’ˆå¯¹é€šå¸¸éœ€è¦ SSD å­˜å‚¨æä¾›çš„ä½å»¶è¿Ÿçš„é”®å€¼å­˜å‚¨å·¥ä½œè´Ÿè½½è¿›è¡Œä¼˜åŒ–
  - è®¸å¤šå…¶ä»–æœåŠ¡ä¸ç›´æ¥ä½¿ç”¨ Tectonicã€‚ ç›¸åï¼Œä»–ä»¬é€šè¿‡ Blob å­˜å‚¨æˆ–æ•°æ®ä»“åº“ç­‰ä¸»è¦ç§Ÿæˆ·ä½¿ç”¨ Tectonicã€‚ è¿™æ˜¯å› ä¸º Tectonic çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯å…³æ³¨ç‚¹åˆ†ç¦»ã€‚ åœ¨å†…éƒ¨ï¼ŒTectonic æ—¨åœ¨å»ºç«‹ç‹¬ç«‹çš„è½¯ä»¶å±‚ï¼Œæ¯ä¸ªè½¯ä»¶å±‚éƒ½ä¸“æ³¨äºå­˜å‚¨ç³»ç»Ÿçš„æ ¸å¿ƒèŒè´£ï¼ˆä¾‹å¦‚ï¼Œå­˜å‚¨èŠ‚ç‚¹åªçŸ¥é“å—è€Œä¸çŸ¥é“å—æˆ–æ–‡ä»¶ï¼‰ã€‚ è¿™ç§ç†å¿µå»¶ä¼¸åˆ° Tectonic å¦‚ä½•ä¸å…¶ä»–å­˜å‚¨åŸºç¡€è®¾æ–½ç›¸é€‚åº”ï¼Œä¾‹å¦‚ï¼ŒTectonic ä¸“æ³¨äºåœ¨æ•°æ®ä¸­å¿ƒå†…æä¾›å®¹é”™ï¼› å®ƒä¸èƒ½é˜²æ­¢æ•°æ®ä¸­å¿ƒæ•…éšœã€‚ å¼‚åœ°å¤åˆ¶æ˜¯ Tectonic å§”æ‰˜ç»™å…¶å¤§å‹ç§Ÿæˆ·çš„ä¸€ä¸ªå•ç‹¬é—®é¢˜ï¼Œä»–ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›é€æ˜ä¸”æ˜“äºä½¿ç”¨çš„å…±äº«å­˜å‚¨ã€‚ç§Ÿæˆ·è¿˜åº”è¯¥äº†è§£å®¹é‡ç®¡ç†å’Œå­˜å‚¨éƒ¨ç½²ä»¥åŠè·¨ä¸åŒæ•°æ®ä¸­å¿ƒé‡æ–°å¹³è¡¡çš„è¯¦ç»†ä¿¡æ¯ã€‚ å¯¹äºè¾ƒå°çš„åº”ç”¨ç¨‹åºï¼Œä»¥æ»¡è¶³å…¶å­˜å‚¨éœ€æ±‚çš„æ–¹å¼ç›´æ¥ä¸ Tectonic äº¤äº’æ‰€éœ€çš„å¤æ‚æ€§å’Œå®ç°å°†ç›¸å½“äºé‡æ–°å®ç°ç§Ÿæˆ·å·²ç»å®ç°çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œå„ä¸ªåº”ç”¨ç¨‹åºé€šè¿‡ç§Ÿæˆ·ä½¿ç”¨Tectonic

- ç›¸å…³å·¥ä½œ

  Tectonic adapts techniques from existing systems and the literature, demonstrating how they can be combined into a
  novel system that realizes exabyte-scale single clusters which support a diversity of workloads on a shared storage fabric.

  - Distributed filesystems with a single metadata node 
    - HDFS [15], GFS [24], and others [38, 40, 44] are limited by the metadata node to tens of petabytes of storage per instance or cluster, compared to Tectonicâ€™s exabytes per cluster.
  - Federating namespaces for increased capacity
    - Federated HDFS [8] and Windows Azure Storage (WAS) [17] combine multiple smaller storage clusters (with a single metadata node) into larger clusters. For instance, a federated HDFS [8] cluster has multiple independent single-namenode namespaces, even though the storage nodes are shared between namespaces. Federated systems still have the operational complexity of bin-packing datasets (Â§2). Also, migrating or sharing data between instances, e.g., to load-balance or add storage capacity, requires resource-heavy data copying among namespaces [33, 46, 54]
  - Hash-based data location for metadata scalability
    - Ceph [53] and FDS [36] eliminate centralized metadata, instead locating data by hashing on object ID. Handling failures in such systems is a scalability bottleneck. Failures are more
      frequent with larger clusters, requiring frequent updates to
      the hash-to-location map that must propagate to all nodes.
      Yahooâ€™s Cloud Object Store [41] federates Ceph instances to
      isolate the effects of failures. Furthermore, adding hardware
      and draining is complicated, as Ceph lacks support for controlled data migration [52]. Tectonic explicitly maps chunks
      to storage nodes, allowing controlled migration.
  - Disaggregated or sharded metadata for scalability
    - Like Tectonic, ADLS [42] and HopsFS [35] increase filesystem capacity by disaggregating metadata into layers in separate sharded data stores. Tectonic hash-partitions directories, while ADLS and HopsFS store some related directory metadata on the same shards, causing metadata for related parts of the directory tree to be colocated. Hash partitioning helps Tectonic avoid hotspots local to part of the directory tree. ADLS uses WASâ€™s federated architecture [17] for block storage. In contrast, Tectonicâ€™s block storage is flat.
    - Like Tectonic, Colossus [28, 32] provides cluster-wide multi-exabyte storage where client libraries directly access
      storage nodes. Colossus uses Spanner [21], a globally consistent database to store filesystem metadata. Tectonic metadata is built on a sharded key-value store, which only provides within-shard strong consistency and no cross-shard operations. These limitations have not been a problem in practice.
  - Blob and object stores
    - Compared to distributed filesystems, blob and object stores [14, 18, 36, 37] are easier to scale, as they do not have a hierarchical directory tree or namespace to keep consistent. Hierarchical namespaces are required for most warehouse workloadsther large-scale storage systems. Lustre [1] and GPFS [45] are tuned for high-throughput parallel access. Lustre limits the number of metadata nodes, limiting scalability. GPFS is POSIX-compliant, introducing unnecessary metadata management overhead for our setting. HBase [9] is a key-value store based on HDFS, but its HDFS clusters are not shared with a warehouse workload. We could not compare with AWS [2] as its design is not public.
  - Multitenancy techniques
    - Tectonicâ€™s multitenancy techniques were co-designed with the filesystem as well as the tenants, and does not aim to achieve optimal fair sharing. It is thus easier to provide performance isolation compared to other systems in the literature. Other systems use more complex resource management techniques to accommodate changes in tenancy and resource use policies, or to provide optimal fair resource sharing among tenants [25, 48, 49]. Some details of Tectonic have previously been described in talks [39, 47] where the system is called Warm Storage.  

### Design and Implementation of an Object Store with Tiered Storage

- Bğœ€-tree æ‹“å±•ç‰ˆæœ¬

  <img src="..\..\photos\Unify\image-20220805143300068.png" alt="image-20220805143300068" style="zoom: 80%;" />

- Bğœ€-tree å­˜å‚¨å †æ ˆç”±å‡ ä¸ªç»„ä»¶æ„æˆï¼Œå¦‚å›¾ 2.2 æ‰€ç¤ºï¼Œå…¶ä¸­å¤§å¤šæ•°å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œä»¥å…è®¸æ¯ä¸ªè§’è‰²çš„ä¸åŒå®ç°äº’æ“ä½œ

  - **æ•°æ®åº“å±‚**ç®¡ç†æ•°æ®é›†å’Œå¿«ç…§ï¼Œç”¨ç”¨æˆ·å‹å¥½çš„ API åŒ…è£…å®ƒä»¬ï¼Œå¹¶å°†å…¶ä»–ç»„ä»¶è¿æ¥åˆ°ä¸€ä¸ªåŠŸèƒ½ç³»ç»Ÿä¸­ï¼ŒåŒ…æ‹¬ä¾‹å¦‚æ•°æ®åº“é…ç½®å’Œæ•°æ®åº“è¶…çº§å—çš„åˆå§‹è¯»å–
  -  **Bğœ€-tree** ä¸Šçš„æ“ä½œä¸æ•°æ®ç®¡ç†å±‚äº¤äº’ä»¥æ ¹æ®éœ€è¦å¤„ç†æ ‘æ“ä½œå’Œé‡å¡‘ï¼Œåœ¨æ­¤æœŸé—´å®ƒå¯ä»¥ç®€å•åœ°ä»æ•°æ®ç®¡ç†å±‚è¯·æ±‚æ•°æ®åº“å¯¹è±¡
  -  **æ•°æ®ç®¡ç†å±‚**ä¸ºä¸Šå±‚æä¾›å¤§éƒ¨åˆ†ä¸é€æ˜çš„å¯¹è±¡ï¼Œè€Œæ— éœ€äº†è§£å…¶ä¸­åŒ…å«çš„æ ‘èŠ‚ç‚¹ã€‚å®ƒè¿æ¥åˆ°ç¼“å­˜ç³»ç»Ÿä»¥æœ€å°åŒ–ç£ç›˜è®¿é—®ï¼Œä½†ä¼šåœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢å­˜å‚¨å±‚ã€‚åœ¨å¦ä¸€ä¸ªæ–¹å‘ä¸Šï¼Œå®ƒèƒ½å¤Ÿå¾ªç¯åˆ†é…æ®µï¼Œä»è¿™äº›æ®µè¯·æ±‚å—èŒƒå›´ï¼Œç„¶ååœ¨é€šçŸ¥åˆ†é…å¤„ç†ç¨‹åºå°†åˆ†é…ä¿å­˜åœ¨åˆ†é…ä½å›¾ä¸­ä¹‹åæŒ‡ç¤ºå­˜å‚¨å±‚æ‰§è¡Œå®é™…å†™å…¥
  - **å­˜å‚¨å±‚**æ˜¯å›´ç»•æ¨¡å—åŒ–è™šæ‹Ÿè®¾å¤‡æ„å»ºçš„ï¼Œä¹Ÿç§°ä¸º vdevsï¼Œå¯ä»¥ä»¥æ ‘çŠ¶æ–¹å¼ç»„ç»‡ã€‚å¶ vdev å¯ä»¥æ˜¯æ“ä½œç³»ç»Ÿæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬åŸå§‹å—è®¾å¤‡ï¼Œå¦‚ç£ç›˜åˆ†åŒºã€‚ç„¶åå¯ä»¥å°†è¿™äº›å¶ vdev èšåˆä¸ºä¸¤ç§ä¸åŒçš„æ–° vdev ç±»å‹ä¹‹ä¸€ï¼š
    - Mirror: ä¸€ä¸ªé•œåƒvdev å°†æ¥æ”¶åˆ°çš„æ•°æ®å†™å…¥å…¶æ‰€æœ‰å­ vdevï¼Œå¹¶ä¸”å¯ä»¥æ‰¿å—é™¤æœ€åä¸€ä¸ª vdev ä¹‹å¤–çš„æ‰€æœ‰ vdev çš„æ•…éšœã€‚ å°½ç®¡å¯¹æœ€å°å’Œæœ€æ…¢è®¾å¤‡çš„å®¹é‡å’Œå†™å…¥é€Ÿåº¦åˆ†åˆ«æœ‰é™åˆ¶ï¼Œä½†é•œåƒå¯ä»¥åœ¨å…¶å­ vdev ä¹‹é—´åˆ†é…è¯»å–ä»¥è¶…è¿‡å•ä¸ªè®¾å¤‡çš„è¯»å–ä¼ è¾“é€Ÿåº¦
    - Parity: å¥‡å¶æ ¡éªŒ vdev å°†å…¶å†™å…¥åˆ†é…ç»™å®ƒçš„å­èŠ‚ç‚¹ï¼Œå¹¶ç”Ÿæˆå¥‡å¶æ ¡éªŒæ•°æ®ä»¥ç»´æŒä»»ä½•å•ä¸ªå­èŠ‚ç‚¹ vdev çš„æ•…éšœã€‚ ä¸å¯ä»¥é€‰æ‹©ä»…ä»å•ä¸ªç£ç›˜è¯»å–çš„é•œåƒ vdev ä¸åŒï¼Œå¥‡å¶æ ¡éªŒ vdev å¿…é¡»ä»å…¶å¤šä¸ªå­ç£ç›˜ä¸­è¯»å–vdevs æ¥é‡å»ºè¯·æ±‚çš„æ•°æ®ï¼ŒåŒæ ·å…è®¸æ¯”å•ä¸ªç£ç›˜æ›´é«˜çš„è¯»å–ååé‡

## ç›¸å…³è®ºæ–‡2 â€” ç»Ÿä¸€å­˜å‚¨åº”ç”¨

### è®ºæ–‡3 (Databricks) Delta Lake: High-Performance ACID Table Storage over Cloud Object Stores

- æ ¸å¿ƒï¼šç”¨äº‘å¯¹è±¡å­˜å‚¨ä½œä¸ºå­˜å‚¨åº•åº§æ¥å®ç°æ•°æ®ä»“åº“æœ‰ä¸¤ä¸ªé‡è¦çš„é—®é¢˜, ä¸€æ˜¯ä¸æ”¯æŒäº‹åŠ¡, äºŒæ˜¯å°æ–‡ä»¶å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚Delta Lakeæ ¸å¿ƒå…¶å®å°±æ˜¯åœ¨äº‘å¯¹è±¡å­˜å‚¨ä¸Šå¼•å…¥äº†ä¸€ä¸ªæ–°çš„ä¸­é—´å±‚, æ¥è§£å†³ä¸Šè¿°é—®é¢˜
- èƒŒæ™¯
  - äº‘å¯¹è±¡å­˜å‚¨å¾ˆé€‚åˆç”¨æ¥ä½œä¸ºæ•°æ®ä»“åº“(Data Warehouse)å’Œæ•°æ®æ¹–(Data Lake)çš„å­˜å‚¨åº•åº§
  - ä¼ ç»Ÿç³»ç»Ÿå’Œäº‘å¯¹è±¡å­˜å‚¨å¹¶ä¸èƒ½å®ç°é«˜æ•ˆå’Œå¯å˜çš„è¡¨æ ¼å­˜å‚¨, ä¹Ÿå°±å¯¼è‡´äº†éš¾ä»¥åœ¨å®ƒä»¬ä¹‹ä¸Šå®ç°æ•°æ®ä»“åº“åŠŸèƒ½
    - è¿™æ˜¯å› ä¸ºä¸HDFSç­‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæˆ–DBMSä¸­çš„è‡ªå®šä¹‰å­˜å‚¨å¼•æ“ä¸åŒ, å¤§å¤šæ•°äº‘å¯¹è±¡å­˜å‚¨ä»…ä»…æ˜¯é”®å€¼å­˜å‚¨, æ²¡æœ‰è·¨é”®ä¸€è‡´æ€§ä¿è¯. å¦å¤–å®ƒä»¬çš„æ€§èƒ½ç‰¹å¾ä¹Ÿä¸åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæœ‰å¾ˆå¤§ä¸åŒ
    - ç›®å‰åœ¨äº‘å¯¹è±¡å­˜å‚¨ä¸­å­˜å‚¨å…³ç³»æ•°æ®é›†æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨åˆ—å¼æ–‡ä»¶æ ¼å¼, å¦‚Parquetå’ŒORC, å…¶ä¸­æ¯ä¸ªè¡¨ä½œä¸ºä¸€ç»„å¯¹è±¡(Parquetæˆ–ORCæ–‡ä»¶)å­˜å‚¨, å¯èƒ½æŒ‰æŸäº›å­—æ®µèšé›†æˆåˆ†åŒº(ä¾‹å¦‚, æ¯ä¸ªæ—¥æœŸçš„å•ç‹¬ä¸€ç»„å¯¹è±¡)
    - åªè¦ç›®æ ‡æ–‡ä»¶æ¯”è¾ƒå¤§, è¿™ç§æ–¹æ³•å¯ä»¥ä¸ºæ‰«æå·¥ä½œè´Ÿè½½æä¾›å¯æ¥å—çš„æ€§èƒ½. ä½†æ˜¯, åœ¨å¦‚ä¸‹å‡ ç§å¤æ‚çš„åœºæ™¯ä¸­å°±ä¸è¡Œäº†:
      - ç”±äºäº‘å¯¹è±¡å­˜å‚¨ä¸­å¤šå¯¹è±¡æ›´æ–°ä¸æ˜¯åŸå­çš„, æ‰€ä»¥å¤šä¸ªæŸ¥è¯¢ä¹‹é—´æ²¡æœ‰éš”ç¦»: ä¾‹å¦‚, å¦‚æœä¸€ä¸ªæŸ¥è¯¢éœ€è¦æ›´æ–°è¡¨ä¸­çš„å¤šä¸ªå¯¹è±¡(ä¾‹å¦‚, åˆ é™¤è¡¨ä¸­æ‰€æœ‰Parquetæ–‡ä»¶ä¸­å…³äºä¸€ä¸ªç”¨æˆ·çš„è®°å½•), å…¶ä»–æŸ¥è¯¢å°†çœ‹åˆ°éƒ¨åˆ†æ›´æ–°, å› ä¸ºæŸ¥è¯¢å•ç‹¬æ›´æ–°æ¯ä¸ªå¯¹è±¡. å›æ»šå†™æ“ä½œä¹Ÿå¾ˆå›°éš¾:å¦‚æœæ›´æ–°æŸ¥è¯¢å´©æºƒ, è¡¨å°±å¤„äºéƒ¨åˆ†æ›´æ–°çš„ä¸ä¸€è‡´çŠ¶æ€
      - å¯¹äºæ‹¥æœ‰æ•°ç™¾ä¸‡ä¸ªå¯¹è±¡çš„å¤§è¡¨, å…ƒæ•°æ®æ“ä½œçš„å¼€é”€å¾ˆå¤§. ä¾‹å¦‚, Parquetæ–‡ä»¶åŒ…æ‹¬å¸¦æœ‰æœ€å°/æœ€å¤§ç»Ÿè®¡ä¿¡æ¯çš„é¡µè„š, å¯ç”¨äºåœ¨é€‰æ‹©æ€§æŸ¥è¯¢ä¸­è·³è¿‡è¯»å–å®ƒä»¬. åœ¨HDFSä¸Šè¯»å–è¿™æ ·çš„é¡µè„šå¯èƒ½éœ€è¦å‡ æ¯«ç§’, ä½†äº‘å¯¹è±¡å­˜å‚¨çš„å»¶è¿Ÿè¦é«˜å¾—å¤š, è¿™äº›æ•°æ®è·³è¿‡æ£€æŸ¥å¯èƒ½æ¯”å®é™…æŸ¥è¯¢èŠ±è´¹æ›´é•¿çš„æ—¶é—´
- Delta Lakeæ˜¯äº‘å¯¹è±¡å­˜å‚¨ä¹‹ä¸Šå…·æœ‰ACIDç‰¹æ€§çš„è¡¨æ ¼å­˜å‚¨å±‚ï¼šä½¿ç”¨æœ¬èº«å­˜å‚¨åœ¨äº‘å¯¹è±¡å­˜å‚¨ä¸­çš„é¢„å†™æ—¥å¿—, ä»¥ACIDçš„æ–¹å¼ç»´æŠ¤å…³äºå“ªäº›å¯¹è±¡æ˜¯Deltaè¡¨çš„ä¸€éƒ¨åˆ†çš„ä¿¡
- Delta Lakeé™¤äº†åŸè¡¨ä¹‹å¤–, è¿˜æ–°å¢äº†ä¸€ç§é¢„å†™æ—¥å¿—(ç§°ä¸ºTransaction Log), å¹¶ä»¥ACIDçš„æ–¹å¼æ¥ç»´æŠ¤, è¿™æ ·å°±å¯ä»¥æ”¯æŒäº‹åŠ¡ã€‚å…³äºTransaction Logçš„å…·ä½“å†…å®¹, ä¸‹æ–‡ä¼šè¯¦ç»†åˆ†æ. æœ‰äº†äº‹åŠ¡ç‰¹æ€§ä¹‹å, Delta Lakeè¿˜å¯ä»¥æ”¯æŒè®¸å¤šä¼ ç»Ÿæ•°æ®æ¹–æ— æ³•æ”¯æŒçš„ç‰¹æ€§, æ¯”å¦‚:
  - æ—¶é—´æ—…è¡Œ(Time travel)
  - UPSERT, DELETEå’ŒMERGEæ“ä½œ(UPSERT, DELETE and MERGE operations)
  - é«˜æ•ˆçš„æµå¼I/O(Effificient streaming I/O)
  - ç¼“å­˜(Caching): å› ä¸ºDeltaè¡¨åŠå…¶æ—¥å¿—ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„, æ‰€ä»¥è®¡ç®—é›†ç¾¤èŠ‚ç‚¹å¯ä»¥å®‰å…¨åœ°å°†å®ƒä»¬ç¼“å­˜åœ¨æœ¬åœ°å­˜å‚¨ä¸­. Databricksäº‘æœåŠ¡ä¸­åˆ©ç”¨å®ƒæ¥ä¸ºDeltaè¡¨å®ç°ä¸€ä¸ªé€æ˜çš„SSDç¼“å­˜
  - æ•°æ®åˆ†å¸ƒä¼˜åŒ–(Data layout optimization): å¯ä»¥è‡ªåŠ¨ä¼˜åŒ–è¡¨ä¸­å¯¹è±¡çš„å¤§å°å’Œæ•°æ®è®°å½•çš„èšé›†æ€§(ä¾‹å¦‚, ä½¿ç”¨Z-orderå­˜å‚¨è®°å½•, ä»¥å®ç°å¤šä¸ªç»´åº¦çš„å±€éƒ¨æ€§), è€Œä¸ä¼šå½±å“è¿è¡Œçš„æŸ¥è¯¢
  - Schemaæ¼”åŒ–(Schema evolution)
  - å®¡è®¡æ—¥å¿—(Audit logging)
- ç•¥...

### è®ºæ–‡4 (Databricks) Photon: A Fast Query Engine for Lakehouse Systems 

- ã€‚ã€‚ã€‚

## ç›¸å…³è®ºæ–‡3 â€” ç»Ÿä¸€å­˜å‚¨è´Ÿè½½

### è®ºæ–‡5 (SingleStore) Cloud-Native Transactions and Analytics in SingleStore

- èƒŒæ™¯

  - SingleStoreDB(S2DB) æ˜¯æœ€æ—©æ”¯æŒHTAP (Hybrid Transaction/Analytical Processingï¼‰ æ•°æ®åº“ä¹‹ä¸€ï¼ˆ2012ï¼‰
  - S2DB çš„ä¸€ä¸ªé›†ç¾¤æœ‰ä¸¤ç§ nodesï¼Œaggregator nodes (è°ƒåº¦) å’Œ leaf node (åˆ†åŒº + è®¡ç®—)ã€‚
    - ç”¨æˆ·æä¾› shard key (å¯ä»¥æ˜¯å¤šä¸ª column)ï¼Œtables æ ¹æ® shard key è¢« hashed åˆ° å¤šä¸ª partitions ä¸Šã€‚
    - ä¸€ä¸ª partition è¦ä¹ˆæ˜¯ master (å¯ä»¥ read/write) è¦ä¹ˆæ˜¯åªè¯» replicaã€‚update ä¿¡æ¯ä» master åˆ° replica çš„åŒæ­¥æ˜¯å®æ—¶çš„
    - query é»˜è®¤åªä¼šç”¨ master partition

- SingleStore database engineä¸»è¦ç‰¹ç‚¹ï¼š

  - è®¡ç®—å­˜å‚¨åˆ†ç¦»æ¶æ„
  - unified table storage (åˆç§° universal storage)

- å­˜å‚¨æ ¼å¼

  - S2DB å†…éƒ¨åŒ…å«ä¸¤ç§ storage typesï¼šan in-memory rowstore backed by a lockfree skiplistï¼Œå’Œä¸€ä¸ª disk-based columnstore

  - åœ¨å†…å­˜ rowstore ä¸­ï¼Œæ¯è¡Œ (ç§°ä¸ºä¸€ä¸ª node) ä¼šå­˜ä¸€ä¸ª linked list of versions æ¥æ”¯æŒ MVCCã€‚å†™å…¥ commit å‰ä¼šå†™ logã€‚ç„¶åä¹Ÿä¼šå®šæœŸç»™å†…å­˜ rowstore æ‰“ snapshotï¼Œæ¢å¤çš„æ—¶å€™æ ¹æ® snapshot + log æ¢å¤
  - columnstore éƒ¨åˆ†çš„æ•°æ®ä¼šè¢«åˆ‡æˆ segments (å­˜ disjoint subset of rowsï¼Œä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨)ã€‚æ¯ä¸ª segment å†…åˆ—æ•°æ®æŒ‰è¡Œé¡ºåºå­˜æ”¾ä½†å•ç‹¬å‹ç¼©ã€‚segment çš„ metadata æ”¾åœ¨ in-memory rowstore ä¸­
  - æ¯ä¸ª segment è¿˜ä¼šåŒ…å«ä¸€ä¸ª delete bitsetï¼Œä¸»è¦ä¸ºäº† OLAP è®¾è®¡ï¼ŒåŒæ—¶ä¹ŸåŠ å…¥äº†ä¸€äº› TP çš„è€ƒè™‘ï¼Œæ¯”å¦‚ encoding åè¦èƒ½ "seekable"ï¼Œè¿™æ ·å¯ä»¥é¿å…è§£å‹æ‰€æœ‰ rowsã€‚å¦‚æœæŒ‡å®šäº† sort keyï¼Œsegments å†…éƒ¨ä¼šæ’åºï¼Œsegments ä¹‹é—´ä¼šä½¿ç”¨ç±»ä¼¼ LSM-tree çš„æ–¹å¼è¿›è¡Œåå°æ’åºã€‚å¯¹äºæ¯ä¸ª columnstore tableï¼ŒS2DB åŒæ—¶ä¹Ÿä¼šå¼€ä¸€ä¸ª in-memory rowstore table æ¥æ”¯æŒå°‘é‡å†™ï¼Œå¹¶åå°å®šæœŸ merge åˆ° columnstore (æ“ä½œç±»ä¼¼ LSM L0 åˆ° L1)ã€‚columnstore è®¡ç®—å¯ä»¥ä½¿ç”¨ vectorized executionï¼Œå¯¹äºéƒ¨åˆ†ç®—å­ï¼Œå¦‚ group by å’Œ hash joinï¼Œå¯ä»¥ç›´æ¥åœ¨æœªè§£å‹çš„æ•°æ®ä¸Šè¿›è¡Œ

  ![image-20220801152101200](../../photos/Unify/image-20220801152101200.png)

- è®¡ç®—å­˜å‚¨åˆ†ç¦»

  <img src="../../photos/Unify/image-20220801152152636.png" alt="image-20220801152152636" style="zoom: 67%;" />

- ç»Ÿä¸€è¡¨å­˜å‚¨

  <img src="../../photos/Unify/image-20220801152458596.png" alt="image-20220801152458596" style="zoom: 50%;" />

  - åŸæ¥çš„S2DB éœ€è¦é€‰æ‹©rowstore è¿˜æ˜¯ columnstore ã€‚è¿™æ˜¯éå¸¸å›°éš¾çš„ï¼Œå› ä¸ºè¿™éœ€è¦è®©ç”¨æˆ·è‡ªå·±å»åˆ¤æ–­æ¶‰åŠè¿™å¼ è¡¨çš„ workload æ˜¯æ›´åå‘äº TP è¿˜æ˜¯ APï¼Œå¦‚æœå¾ˆå‡è¡¡é‚£å°±æ— äº†ã€‚
  - ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒS2DB æå‡º Unified table storageï¼Œå°†åŸæœ¬çš„ columnstore è¿›è¡Œä¼˜åŒ–æ¥æ”¯æŒ AP å’Œ TPã€‚å…¶é‡‡ç”¨åŸºäº LSM tree çš„æ–¹å¼ï¼Œå°†æ•°æ®å†™å…¥è¿ç»­çš„ chunks ä¸­ã€‚ä¸ºäº†åŠ é€Ÿ TP æ€§èƒ½ï¼Œåšäº†å¦‚ä¸‹ä¼˜åŒ–ï¼š
    - åšäº†ä¸ªä¿å­˜åœ¨å†…å­˜ä¸­çš„ delete bitsetï¼Œè€Œä¸æ˜¯åƒå…¶ä»– LSM tree å®ç°ï¼ˆe.g., RocksDBï¼‰é‚£æ ·ç”¨ tombstone entry æ¥æ ‡è®° delete (merge on readï¼Œè¯»æ”¾å¤§å¤ªå¤§)
      - ç»†è¯»ä¸€ä¸‹...
    - å’Œå…¶ä»– LSM tree å®ç°ç±»ä¼¼ï¼Œå†™å…¥éƒ¨åˆ†ä¾ç„¶æ”¾åœ¨ in-memory ä¸­ (éœ€è¦é¢å¤–å¤„ç† metadata)
    - æ„å»ºäº†å¤§é‡æ”¯æŒ LSM tree çš„ secondary index æ¥æ”¯æŒ efficient point accessã€‚æ¯”å¦‚ bloom filter å’Œ inverted index æ¥è¿‡æ»¤ä¸éœ€è¦è®¿é—®çš„ segmentsã€‚ä»¥åŠ S2DB è‡ªå·±çš„ two-level index structure æ¥å®šä½ segment å’Œ offset
    - row-level lock æ¥é¿å… blocking

- ç›¸å…³

  - AnalyticDB: Real-time OLAP Database System at Alibaba Cloud (VLDB 2019
  - [SingleStoreå¹¶è¡ŒåŒ–](https://link.zhihu.com/?target=https%3A//www.singlestore.com/blog/how-to-process-trillion-rows-per-second-ad-hoc-analytic-queries/)

### è®ºæ–‡6 (ScaleStore) ScaleStore: A Fast and Cost-Efficient Storage Engine using DRAM, NVMe, and RDMA

-  ä¸€ç§æ–°é¢–çš„åˆ†å¸ƒå¼å­˜å‚¨å¼•æ“ï¼Œå®ƒåˆ©ç”¨DRAM ç¼“å­˜ã€NVMe å­˜å‚¨å’Œ RDMAç½‘ç»œåŒæ—¶å®ç°é«˜æ€§èƒ½ã€æˆæœ¬æ•ˆç›Šå’Œå¯æ‰©å±•æ€§
-  ...

### è®ºæ–‡7 Proteus: Autonomous Adaptive Storage for Mixed Workloads

- èƒŒæ™¯ï¼šHTAP (Hybrid Transaction/Analytical Processingï¼‰
  - å¯¹äºæ•°æ®è§„æ¨¡é€æ­¥å¢å¤§çš„ä¸šåŠ¡æ¥è¯´ï¼Œåˆ†å¸ƒå¼æ•°æ®åº“å¾ˆå¥½åœ°æ»¡è¶³äº†å®ƒä»¬å¯¹ TP æ€§èƒ½æ°´å¹³æ‰©å±•çš„éœ€æ±‚
  - ä½†ç”±äºå­˜å‚¨æ ¼å¼æˆ–è€…è®¾è®¡ç›®æ ‡ä¸Šçš„å·®å¼‚ï¼Œè¿™äº›ç³»ç»Ÿä¸ä¸€å®šèƒ½æ»¡è¶³ä¸šåŠ¡å¯¹äºå†å²æ•°æ®çš„ AP åˆ†æéœ€æ±‚
- æ ¸å¿ƒç­–ç•¥ï¼šæå‡ºä¸€äº›æ ¹æ® workload è‡ªé€‚åº”å­˜å‚¨çš„ç­–ç•¥/ç®—æ³•ï¼ŒåŒ…æ‹¬ä¸€äº›å‡ éƒ¨åˆ†ï¼š
  - Formatï¼šæ ¹æ®æ•°æ®è¢«è®¿é—®çš„æƒ…å†µå†³å®šä½¿ç”¨è¡Œå­˜/åˆ—å­˜
  - Tierï¼šå†…å­˜/ç£ç›˜ï¼Œé€‰æ‹©åˆé€‚çš„å­˜å‚¨ä»‹è´¨ï¼Œæ¯”å¦‚å†·æ•°æ®æ”¾åœ¨ç£ç›˜é‡Œ
  - æ’åº/å‹ç¼©ï¼šå¯¹äºåˆ—å­˜æ•°æ®ï¼Œä½¿ç”¨æ’åºå¯ä»¥å€ŸåŠ©äºŒåˆ†æŸ¥æ‰¾æˆ–è€… merge-join ç­‰ç®—æ³•åŠ é€Ÿï¼Œä½¿ç”¨å‹ç¼©æœ‰æ•ˆåœ°å‡å°‘å ç”¨çš„å­˜å‚¨ç©ºé—´
  - Replicationï¼šæ­¤å¤„ä¾§é‡çš„ä¸æ˜¯æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼å­˜å‚¨ä¸­ä¸ºäº†å¯é æ€§åšçš„å‰¯æœ¬ï¼Œè€Œæ˜¯ä¸ºäº†åŠ é€ŸæŸ¥è¯¢åˆ»æ„è¿›è¡Œçš„æ•°æ®å†—ä½™ä»¥æ”¯æŒç±»ä¼¼ local join ä¹‹ç±»çš„åœºæ™¯
- Proteus æ ¹æ® workload çš„å®é™…æƒ…å†µï¼Œå¯ä»¥å¯¹ç³»ç»Ÿå†…å®é™…æ•°æ®å­˜å‚¨åšå‡ºçš„è°ƒæ•´å†³ç­–ï¼Œæ¯”å¦‚è¯´æ•°æ®åŸå…ˆæ˜¯è¡Œå­˜çš„ï¼Œä½†ç»è¿‡ä¸€æ®µæ—¶é—´çš„è®¿é—®åï¼ŒProteus åˆ¤æ–­åˆ—å­˜æ›´ä¸ºåˆé€‚ï¼Œåˆ™å°†åœ¨è¿è¡Œæ—¶è¿›è¡Œç›¸åº”çš„è°ƒæ•´
- ...

## ç›¸å…³è®ºæ–‡ 4 â€” è™šæ‹Ÿåœ°å€ç©ºé—´

- **è™šæ‹Ÿå†…å­˜**æ˜¯è®¡ç®—æœºç³»ç»Ÿå†…å­˜ç®¡ç†çš„ä¸€ç§æŠ€æœ¯ã€‚å®ƒä½¿å¾—åº”ç”¨ç¨‹åºè®¤ä¸ºå®ƒæ‹¥æœ‰è¿ç»­å¯ç”¨çš„å†…å­˜ï¼ˆä¸€ä¸ªè¿ç»­å®Œæ•´çš„åœ°å€ç©ºé—´ï¼‰ï¼Œè€Œå®é™…ä¸Šç‰©ç†å†…å­˜é€šå¸¸è¢«åˆ†éš”æˆå¤šä¸ªå†…å­˜ç¢ç‰‡ï¼Œè¿˜æœ‰éƒ¨åˆ†æš‚æ—¶å­˜å‚¨åœ¨å¤–éƒ¨ç£ç›˜å­˜å‚¨å™¨ä¸Šï¼Œåœ¨éœ€è¦æ—¶è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ä¸æ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯çš„ç³»ç»Ÿç›¸æ¯”ï¼Œä½¿ç”¨è¿™ç§æŠ€æœ¯ä½¿å¾—å¤§å‹ç¨‹åºçš„ç¼–å†™å˜å¾—æ›´å®¹æ˜“ï¼Œå¯¹çœŸæ­£çš„ç‰©ç†å†…å­˜ï¼ˆä¾‹å¦‚RAMï¼‰çš„ä½¿ç”¨ä¹Ÿæ›´æœ‰æ•ˆç‡ã€‚æ­¤å¤–ï¼Œè™šæ‹Ÿå†…å­˜æŠ€æœ¯å¯ä»¥ä½¿å¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€ä¸ªè¿è¡Œåº“ï¼Œå¹¶é€šè¿‡åˆ†å‰²ä¸åŒè¿›ç¨‹çš„å†…å­˜ç©ºé—´æ¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§

  ![VirtualMem01](..\..\photos\Unify\VirtualMem01.png)                                    <img src="..\..\photos\Unify\image-20220805144414360.png" alt="image-20220805144414360" style="zoom: 15%;" />          

- èƒ½å¦å’Œæˆ‘ä»¬è®¾è®¡ç†å¿µç›¸ç»“åˆï¼Ÿ

- éƒ½æ˜¯åŸºäºSCMçš„æ–‡ä»¶ç³»ç»Ÿ

  - åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸Šæ„å»ºæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åˆ©ç”¨å†…å­˜ç®¡ç†å•å…ƒ (MMU) å°†æ–‡ä»¶ç³»ç»Ÿåœ°å€æ˜ å°„åˆ° SCM ä¸Šçš„ç‰©ç†åœ°å€

### A New Design of In-Memory File System Based on File Virtual Address Framework

- æŒä¹…å†…å­˜çš„æ–°å…´æŠ€æœ¯ï¼Œå¦‚ PCMã€MRAMï¼Œä¸ºåœ¨å†…å­˜ä¸­ä¿å­˜æ–‡ä»¶æä¾›äº†æœºä¼šã€‚ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿç»“æ„å¯èƒ½éœ€è¦é‡æ–°ç ”ç©¶ã€‚å°½ç®¡é’ˆå¯¹å†…å­˜æå‡ºäº†å‡ ç§æ–‡ä»¶ç³»ç»Ÿï¼Œä½†å®ƒä»¬ä¸­çš„å¤§å¤šæ•°åœ¨æ²¡æœ‰å……åˆ†åˆ©ç”¨å¤„ç†å™¨ç«¯ç¡¬ä»¶çš„æƒ…å†µä¸‹æ€§èƒ½æœ‰é™ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªåŸºäºæ–°æ¦‚å¿µâ€œæ–‡ä»¶è™šæ‹Ÿåœ°å€ç©ºé—´â€çš„æ¡†æ¶ã€‚è®¾è®¡å¹¶å®ç°äº†ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå³å¯æŒç»­å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ˆSIMFSï¼‰ï¼Œå®ƒå……åˆ†åˆ©ç”¨äº†æ–‡ä»¶è®¿é—®è·¯å¾„ä¸Šçš„å†…å­˜æ˜ å°„ç¡¬ä»¶ã€‚é¦–å…ˆï¼ŒSIMFS å°†æ‰“å¼€æ–‡ä»¶çš„åœ°å€ç©ºé—´åµŒå…¥åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚ç„¶åï¼Œæ–‡ä»¶è®¿é—®ç”±å†…å­˜æ˜ å°„ç¡¬ä»¶å¤„ç†ã€‚è¿˜ä¸ºå»ºè®®çš„ SIMFS æå‡ºäº†å‡ ç§ä¼˜åŒ–æ–¹æ³•ã€‚è¿›è¡Œäº†å¹¿æ³›çš„å®éªŒã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒSIMFS çš„ååé‡æ¯”æœ€å…ˆè¿›çš„å†…å­˜æ–‡ä»¶ç³»ç»Ÿå®ç°äº†æ˜¾ç€çš„æ€§èƒ½æå‡

- SCMFS : A File System for Storage Class Memory

- Efficient persistent memory file systems using virtual superpages with multi-level allocator
- 

## ç›¸å…³è®ºæ–‡ â€” å…¶ä»–

### è®ºæ–‡8 (Google) From GFS to Colossus : Cluster-Level Storage

- 2017ï¼Œç¬¬äºŒä»£GFSï¼Œæ—¨åœ¨æå‡å­˜å‚¨æ•ˆç‡
  - å…ƒæ•°æ®ä¼¸ç¼©å…è®¸å¯¹èµ„æºè¿›è¡Œåˆ’åˆ†
  - ç»„åˆä¸åŒå¤§å°å’Œä¸åŒç±»å‹å·¥ä½œè´Ÿè½½çš„ç£ç›˜çš„èƒ½åŠ›éå¸¸å¼ºå¤§

### è®ºæ–‡9 XRP: In-Kernel Storage Functions with eBPF

- èƒŒæ™¯

  - éšç€å¾®ç§’çº§çš„NVMeå­˜å‚¨è®¾å¤‡çš„å‡ºç°ï¼ŒLinuxå­˜å‚¨è½¯ä»¶æ ˆåœ¨æ€»è®¿é—®å¼€é”€ä¸­çš„å æ¯”ä¹Ÿéšä¹‹æ˜æ˜¾ä¸Šå‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æœ€æ–°çš„é«˜é€Ÿå­˜å‚¨è®¾å¤‡ä¸Šï¼Œæ¥è‡ªè½¯ä»¶æ ˆçš„å¼€é”€å‡ ä¹è®©è®¿é—®å¼€é”€ç¿»å€äº†

    <img src="../../photos/Unify/1.jpg" alt="å›¾ç‰‡" style="zoom:67%;" />

  - ç°æœ‰çš„æ–¹æ¡ˆéƒ½å¤ªæ¿€è¿›äº†ï¼Œå®ƒä»¬éƒ½éœ€è¦å¯¹åº”ç”¨æˆ–æ˜¯ç¡¬ä»¶æœ‰ç€ä¾µå…¥æ€§çš„ä¿®æ”¹

    - ä¾‹å¦‚æœ‰äº›kernel bypassçš„æ–¹æ¡ˆå¦‚SPDKå…è®¸åº”ç”¨å»ç›´æ¥è®¿é—®åº•ä¸‹çš„è®¾å¤‡ï¼Œä½†æ˜¯ä¹Ÿä¼šå¼ºè¿«åº”ç”¨å®ç°è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒæ—¶æ”¾å¼ƒéš”ç¦»æ€§å’Œå®‰å…¨æ€§ï¼Œå¹¶ä¸”è¿˜éœ€è¦pollingå¯¼è‡´äº†CPUèµ„æºçš„æµªè´¹ï¼ˆå°¤å…¶æ˜¯IOåˆ©ç”¨ç‡ä½çš„æ—¶å€™pollingçš„åå¤„å°¤ä¸ºæ˜æ˜¾ï¼‰ã€‚æµ‹è¯•æ•°æ®å±•ç¤ºå‡ºä½¿ç”¨SPDKçš„åº”ç”¨åœ¨å¯è°ƒåº¦çº¿ç¨‹æ•°é‡å¤§äºCPUæ•°é‡æ—¶ä¼šå¯¼è‡´æ›´å·®çš„å°¾æ—¶å»¶ï¼Œç”šè‡³ååé‡éƒ½ä¼šä¸¥é‡ä¸‹é™ã€‚å› æ­¤ï¼Œæœ¬æ–‡å¸Œæœ›èƒ½å¤Ÿæ¢å¯»ä¸€ç§æ—¢æ˜“äºéƒ¨ç½²ï¼Œåˆæ— éœ€å¯¹åº”ç”¨æœ‰è¿‡å¤šä¾µå…¥ä¿®æ”¹ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç°æœ‰kernelå’Œæ–‡ä»¶ç³»ç»ŸåŠŸèƒ½çš„é«˜é€Ÿå­˜å‚¨è®¿é—®æ–¹æ¡ˆã€‚

- è§‚å¯Ÿï¼šå½“å‰éƒ¨åˆ†åº”ç”¨çš„ä¸€äº›å­˜å‚¨IOæ“ä½œä¸­ï¼Œ**éœ€è¦ç”¨æˆ·æ€å»å¤„ç†å¤§é‡çš„ä¸­é—´ç»“æœ**ã€‚å¦‚æœæ¯ä¸ªä¸­é—´ç»“æœéƒ½éœ€è¦å¾€è¿”äºå†…æ ¸æ€å’Œç”¨æˆ·æ€æ‰èƒ½å¤„ç†çš„è¯ï¼Œä¼šå¼•å…¥å¤§é‡çš„ä¼ é€’å¼€é”€ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¼€é”€ä¸»è¦æ¥è‡ªäºå†…æ ¸ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ–‡ä»¶ç³»ç»Ÿï¼Œæ­¤å¤–bioå±‚çš„å¼€é”€ç›¸æ¯”äºè®¾å¤‡é©±åŠ¨ä¹Ÿæ›´ä¸ºæ˜æ˜¾ï¼‰

  <img src="../../photos/Unify/2.jpg" alt="å›¾ç‰‡" style="zoom: 25%;" />

  - ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯å½“åº”ç”¨è¿›è¡ŒåŸºäºb-treeçš„ç´¢å¼•ï¼Œåº”ç”¨çš„æœ€ç»ˆç›®çš„å…¶å®æ˜¯æƒ³æ‰¾åˆ°æœ€æœ«ç«¯çš„å¶å­èŠ‚ç‚¹ï¼Œä½†æ˜¯é€šå¸¸çš„b-treeæœç´¢è¿‡ç¨‹ä¸­ä¼šå°†æœç´¢è·¯å¾„ä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹è¯»å–åˆ°ç”¨æˆ·æ€ã€‚è¯¥è¿‡ç¨‹ä¸­å°±ä¼šåå¤å¤šæ¬¡è§¦å‘ä¸Šå›¾ä¸­çš„å„é¡¹å¼€é”€ã€‚é’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œæœ¬æ–‡æå‡ºXRPï¼Œå…¶æ ¸å¿ƒè§£å†³æ€è·¯ï¼ˆå¦‚ä¸‹å›¾ï¼‰æ˜¯å°†å¤šæ¬¡åº”ç”¨é€»è¾‘åœ¨è½¯ä»¶æ ˆåº•å±‚batchèµ·æ¥ï¼Œæ¶ˆé™¤å†—ä½™çš„ä¸Šå±‚å¼€é”€ã€‚å…·ä½“æ¥è¯´ï¼Œæœ¬æ–‡åˆ©ç”¨eBPFæŠ€æœ¯ï¼Œå°†éƒ¨åˆ†åŸæœ¬åœ¨ç”¨æˆ·æ€æ‰§è¡Œçš„åº”ç”¨é€»è¾‘æ”¾å…¥å†…æ ¸æ€çš„NVMeé©±åŠ¨å±‚ï¼Œä»è€Œä½¿è¯¥è¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœä¸ç”¨å†è¿”å›ç”¨æˆ·æ€ï¼Œè€Œæ˜¯åœ¨å†…æ ¸æ€ä¸­å°±å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥å¤„ç†

<img src="../../photos/Unify/3.jpg" alt="å›¾ç‰‡" style="zoom: 50%;" />

- ä¹‹æ‰€ä»¥é€‰æ‹©hookåœ¨NVMeé©±åŠ¨å±‚åˆ™æ˜¯å› ä¸ºåœ¨å†…æ ¸æ€çš„ä½ç½®ä¹Ÿåº”å½“å°½é‡èƒ½é¿å…ç»è¿‡ä¸Šå›¾ä¸­é‚£äº›å¼€é”€è¾ƒå¤§çš„æ­¥éª¤ï¼ˆå¦‚ext4å’Œbioå±‚ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½œè€…ä¹‹å‰çš„ç ”ç©¶ä¸­æœ‰å¯¹æ·±åº¦ä¸º10çš„b-treeè¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœä¸ç»•è¿‡å†…æ ¸ä¸­çš„syscallå’Œæ–‡ä»¶ç³»ç»Ÿå±‚ï¼Œé‚£åœ¨å»¶æ—¶å’Œååé‡ä¸Šçš„æå‡å¹¶ä¸æ˜æ˜¾ã€‚è€Œåœ¨NVMeé©±åŠ¨å±‚åˆ™èƒ½æ˜¾è‘—æå‡è¿™ä¸¤é¡¹æ€§èƒ½ã€‚

<img src="../../photos/Unify/4.jpg" alt="å›¾ç‰‡" style="zoom:50%;" />

- å°½ç®¡è¿™ä¸ªæ–¹æ³•çœ‹èµ·æ¥å¾ˆç›´è§‚ï¼Œä½†æ˜¯ä¾ç„¶å­˜åœ¨ä¸¤ä¸ªä¸»è¦æŒ‘æˆ˜ï¼š
  - NVMeé©±åŠ¨å±‚ç›®å‰æ— æ³•è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ã€‚ä¾‹å¦‚åœ¨ç´¢å¼•ç©¿è¶Šåœºæ™¯ä¸‹ï¼ŒNVMeä¸­çš„XRPåœ¨å¤„ç†ä¸€ä¸ªreadæ“ä½œæ—¶ä¼šåœ¨ä»å½“å‰blockä¸­é€šè¿‡offsetå»æå–ä¸‹ä¸€ä¸ªblockã€‚ä½†æ˜¯å®ƒæ— æ³•è·çŸ¥è¿™ä¸ªoffsetæ‰€å…³è”çš„ç‰©ç†blockï¼Œå› ä¸ºå®ƒä¸çŸ¥é“æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å…³å…ƒæ•°æ®
  - XRPç³»ç»Ÿéš¾ä»¥åº”å¯¹ç”±æ–‡ä»¶ç³»ç»Ÿå¤„ç†çš„å¹¶å‘è¯»å†™æ“ä½œã€‚å¦‚æœæ–‡ä»¶å‘ç”Ÿæ”¹å†™ï¼ŒNVMe driverå±‚æ— æ³•è§‚å¯Ÿåˆ°ç¼“å­˜åœ¨kernel page cacheä¸­çš„æ–‡ä»¶æ›´æ”¹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´XRPè¯»å–åˆ°é”™è¯¯çš„æ•°æ®ã€‚è€Œç”¨é”æ¥ä¿æŠ¤æ–‡ä»¶ç»“æ„å¸¦æ¥çš„å¼€é”€åˆ™ä¼šæ¯”è¾ƒå¤§ã€‚

- é’ˆå¯¹ä¸Šè¿°æŒ‘æˆ˜
  - è§‚å¯Ÿåˆ°å¤§éƒ¨åˆ†on-diskçš„æ•°æ®ç»“æ„éƒ½éå¸¸ç¨³å®šï¼Œå¸¸ç”¨çš„æ•°æ®åº“å¤§éƒ¨åˆ†é‡‡ç”¨äº†indexæ–‡ä»¶åˆ›å»ºåä¸å†æ›´æ”¹æˆ–æ›´æ”¹é¢‘ç‡è¾ƒä½çš„ç´¢å¼•æ–‡ä»¶ç»“æ„ï¼Œä¸”å¤§éƒ¨åˆ†æ•°æ®åº“ä¼šé€‰æ‹©è‡ªè¡Œç®¡ç†page cacheè€Œä¸æ˜¯ä½¿ç”¨fsæä¾›çš„page cache
  - å¦ä¸€æ–¹é¢ï¼Œå¤§éƒ¨åˆ†ç´¢å¼•éƒ½é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªå¤§æ–‡ä»¶ä¸­ï¼Œä¸”æ¯ä¸ªç´¢å¼•éƒ½ä¸ä¼šè·¨å¤šä¸ªæ–‡ä»¶
- å› æ­¤ï¼Œæœ¬æ–‡çš„è§£å†³æ–¹å¼æ˜¯é™å®šXRPçš„ä½¿ç”¨åœºæ™¯ä¸ºç´¢å¼•æ–‡ä»¶ç»“æ„æ¯”è¾ƒç¨³å®šå’Œç”¨æˆ·ç®¡ç†page cacheçš„åœºæ™¯ï¼ŒåŒæ—¶ç¼“å­˜å’Œç»´æŠ¤å•ä¸ªæ–‡ä»¶æ‰€éœ€çš„logical-to-physical-mappingä¿¡æ¯ï¼ˆmetadata digestï¼‰ä»¥ä¾›NVMe driverå±‚è®¿é—®
- æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“NVMeå­˜å‚¨è®¾å¤‡å‘é€ä¸­æ–­åï¼Œä¸­æ–­handleræœ€ç»ˆä¼šè°ƒç”¨hookçš„BPFå‡½æ•°è¿›è¡Œå¤„ç†ã€‚è¯¥å‡½æ•°åˆ©ç”¨metadata digestæ‰€æä¾›çš„æ¥å£å®‰å…¨åœ°è®¿é—®å°‘é‡ext4æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ä»è€Œç»•è¿‡NVMeé©±åŠ¨ä»¥ä¸Šæ‰€æœ‰è½¯ä»¶å±‚çš„ä»‹å…¥ç›´åˆ°æœ¬æ¬¡resubmissioné€»è¾‘å…¨éƒ¨å¤„ç†å®Œæˆåè¿”å›ç”¨æˆ·æ€

<img src="../../photos/Unify/5.jpg" alt="å›¾ç‰‡" style="zoom: 50%;" />

- æœ¬æ–‡åœ¨Linuxä¸Šé€šè¿‡eBPFå®ç°äº†æ”¯æŒext4æ–‡ä»¶ç³»ç»Ÿçš„XRPåŸå‹ã€‚ä¸ºäº†å’ŒBaselineï¼ˆlinuxçš„åŒæ­¥ä¸å¼‚æ­¥syscallä»¥åŠkernel bypassæ–¹æ¡ˆSPDKï¼‰è¿›è¡Œå¯¹æ¯”ï¼Œæ„å»ºäº†ä¸€ä¸ªç®€å•çš„KVå­˜å‚¨ç¨‹åºâ€”â€”BPF-KVã€‚åœ¨å°¾å»¶æ—¶æ–¹é¢ï¼Œ99thä¸‹XRPæ˜¾è‘—å¥½äºlinuxçš„åŒæ­¥å’Œå¼‚æ­¥syscallï¼Œè€Œåœ¨99.9thä¸‹ï¼Œå°½ç®¡å¤§éƒ¨åˆ†æ—¶å€™ä¾ç„¶æ˜¯SPDKå¥½äºXRPï¼Œä½†æ˜¯å½“çº¿ç¨‹æ•°å¤§äºæ‰§è¡Œçš„ç‰©ç†æ ¸å¿ƒæ•°ï¼ˆ6ä¸ªï¼‰æ—¶ï¼ŒSPDKçš„å°¾æ—¶å»¶ä¼šæ˜¾è‘—ä¸Šå‡ï¼Œè€ŒXRPåˆ™ä¾ç„¶ç¨³å®šã€‚

## æœ€æ–°è®ºæ–‡

### ATC 22

- å­˜å‚¨3ï¼Œæœºå™¨å­¦ä¹ 3ï¼Œåˆ†ç¦»ç³»ç»Ÿ2ï¼Œç½‘ç»œ2ï¼Œéƒ¨ç½²ç³»ç»Ÿ2ï¼Œå®¹å™¨ï¼Œbugï¼Œå®‰å…¨ï¼Œç¼–è¯‘ï¼ŒNIC

- Storage 1

  - ZNSwap: un-Block your Swap
    Shai Bergman, Technion; Niklas Cassel and Matias BjÃ¸rling, Western Digital; Mark Silberstein, Technion

  - Building a High-performance Fine-grained Deduplication Framework for Backup Storage with High Deduplication Ratio
    Xiangyu Zou and Wen Xia, Harbin Institute of Technology, Shenzhen; Philip Shilane, Dell Technologies; Haijun Zhang and Xuan Wang, Harbin Institute of Technology, Shenzhen

  - Secure and Lightweight Deduplicated Storage via Shielded Deduplication-Before-Encryption
    Zuoru Yang, The Chinese University of Hong Kong; Jingwei Li, University of Electronic Science and Technology of China; Patrick P. C. Lee, The Chinese University of Hong Kong

- Containers

  - RunD: A Lightweight Secure Container Runtime for High-density Deployment and High-concurrency Startup in Serverless Computing
    Zijun Li, Jiagan Cheng, and Quan Chen, Shanghai Jiao Tong University; Eryu Guan, Zizheng Bian, Yi Tao, Bin Zha, Qiang Wang, and Weidong Han, Alibaba Group; Minyi Guo, Shanghai Jiao Tong University
  - Help Rather Than Recycle: Alleviating Cold Startup in Serverless Computing Through Inter-Function Container Sharing
    Zijun Li, Linsong Guo, Quan Chen, Jiagan Cheng, and Chuhao Xu, Shanghai Jiao Tong University; Deze Zeng, China University of Geosciences; Zhuo Song, Tao Ma, and Yong Yang, Alibaba Cloud; Chao Li and Minyi Guo, Shanghai Jiao Tong University
  - RRC: Responsive Replicated Containers
    Diyu Zhou, UCLA and EPFL; Yuval Tamir, UCLA

- Distributed Systems 1

  - uKharon: A Membership Service for Microsecond Applications
    Rachid Guerraoui and Antoine Murat, EPFL; Javier Picorel, Huawei Technologies; Athanasios Xygkis, EPFL; Huabing Yan and Pengfei Zuo, Huawei Technologies
  - KRCORE: A Microsecond-scale RDMA Control Plane for Elastic Computing
    Xingda Wei, Shanghai Jiao Tong University, Shanghai AI Laboratory; Fangming Lu, Shanghai Jiao Tong University; Rong Chen, Shanghai Jiao Tong University, Shanghai AI Laboratory; Haibo Chen, Shanghai Jiao Tong University
  - Zero-Change Object Transmission for Distributed Big Data Analytics
    Mingyu Wu, Shuaiwei Wang, Haibo Chen, and Binyu Zang, Shanghai Jiao Tong University
  - Sift: Using Refinement-guided Automation to Verify Complex Distributed Systems
    Haojun Ma, Hammad Ahmad, Aman Goel, Eli Goldweber, Jean-Baptiste Jeannin, Manos Kapritsos, and Baris Kasikci, University of Michigan

- Machine Learning 1

  - Faith: An Efficient Framework for Transformer Verification on GPUs
    Boyuan Feng, Tianqi Tang, Yuke Wang, Zhaodong Chen, Zheng Wang, Shu Yang, Yuan Xie, Yufei Ding, University of California, Santa Barbara
  - DVABatch: Diversity-aware Multi-Entry Multi-Exit Batching for Efficient Processing of DNN Services on GPUs
    Weihao Cui, Han Zhao, Quan Chen, Hao Wei, and Zirui Li, Shanghai Jiao Tong University; Deze Zeng, China University of Geosciences; Chao Li and Minyi Guo, Shanghai Jiao Tong University
  - Serving Heterogeneous Machine Learning Models on Multi-GPU Servers with Spatio-Temporal Sharing
    Seungbeom Choi, Sunho Lee, Yeonjae Kim, Jongse Park, Youngjin Kwon, and Jaehyuk Huh, KAIST
  - PilotFish: Harvesting Free Cycles of Cloud Gaming with Deep Learning Training
    Wei Zhang and Binghao Chen, Shanghai Jiao Tong University; Zhenhua Han, Microsoft Research; Quan Chen, Shanghai Jiao Tong University; Peng Cheng, Fan Yang, Ran Shu, and Yuqing Yang, Microsoft Research; Minyi Guo, Shanghai Jiao Tong University

- Operating Systems 1

  - Privbox: Faster System Calls Through Sandboxed Privileged Execution
    Dmitry Kuznetsov and Adam Morrison, Tel Aviv University
  - BBQ: A Block-based Bounded Queue for Exchanging Data and Profiling
    Jiawei Wang, Huawei Dresden Research Center, Huawei OS Kernel Lab, Technische UniversitÃ¤t Dresden; Diogo Behrens, Ming Fu, Lilith Oberhauser, Jonas Oberhauser, and Jitang Lei, Huawei Dresden Research Center, Huawei OS Kernel Lab; Geng Chen, Huawei OS Kernel Lab; Hermann HÃ¤rtig, Technische UniversitÃ¤t Dresden; Haibo Chen, Huawei OS Kernel Lab, Shanghai Jiao Tong University

- Disaggregated Systems

  - Sibylla: To Retry or Not To Retry on Deep Learning Job Failure
    Taeyoon Kim, Suyeon Jeong, Jongseop Lee, Soobee Lee, and Myeongjae Jeon, UNIST
  - Speculative Recovery: Cheap, Highly Available Fault Tolerance with Disaggregated Storage
    Nanqinqin Li, Anja Kalaba, Michael J. Freedman, Wyatt Lloyd, and Amit Levy, Princeton University
  - Direct Access, High-Performance Memory Disaggregation with DirectCXL
    Donghyun Gouk, Sangwon Lee, Miryeong Kwon, and Myoungsoo Jung, KAIST

- Networking 1

  - Not that Simple: Email Delivery in the 21st Century
    Florian Holzbauer, SBA Research; Johanna Ullrich, University of Vienna; Martina Lindorfer, TU Wien; Tobias Fiebig, Max-Planck-Institut fÃ¼r Informatik
  - AddrMiner: A Comprehensive Global Active IPv6 Address Discovery System
    Guanglei Song, Jiahai Yang, Lin He, Zhiliang Wang, Guo Li, Chenxin Duan, and Yaozhong Liu, Tsinghua University; Zhongxiang Sun, Beijing Jiaotong University
  - Co-opting Linux Processes for High-Performance Network Simulation
    Rob Jansen, U.S. Naval Research Laboratory; Jim Newsome, Tor Project; Ryan Wails, Georgetown University, U.S. Naval Research Laboratory
    - **Awarded Best Paper!**

- Finding Bugs

  - KSG: Augmenting Kernel Fuzzing with System Call Specification Generation
    Hao Sun, Yuheng Shen, Jianzhong Liu, Yiru Xu, and Yu Jiang, Tsinghua University
  - DLOS: Effective Static Detection of Deadlocks in OS Kernels
    Jia-Ju Bai, Tuo Li, and Shi-Min Hu, Tsinghua University
  - Modulo: Finding Convergence Failure Bugs in Distributed Systems with Divergence Resync Models
    Beom Heyn Kim, Samsung Research, University of Toronto; Taesoo Kim, Samsung Research, Georgia Institute of Technology; David Lie, University of Toronto

- Security

  - SoftTRR: Protect Page Tables against Rowhammer Attacks using Software-only Target Row Refresh
    Zhi Zhang, CSIROâ€™s Data61, Australia; Yueqiang Cheng, NIO Security Research; Minghua Wang, Baidu Security; Wei He and Wenhao Wang, State Key Laboratory of Information Security, Institute of Information Engineering, CAS and University of Chinese Academy of Sciences; Surya Nepal, CSIROâ€™s Data61, Australia; Yansong Gao, Nanjing University of Science and Technology, China; Kang Li, Baidu Security; Zhe Wang and Chenggang Wu, State Key Laboratory of Computer Architecture, Institute of Computing Technology, CAS and University of Chinese Academy of Sciences
  - Hardening Hypervisors with Ombro
    Ethan Johnson, Colin Pronovost, and John Criswell, University of Rochester
  - HyperEnclave: An Open and Cross-platform Trusted Execution Environment
    Yuekai Jia, Tsinghua University; Shuang Liu, Ant Group; Wenhao Wang, Institute of Information Engineering, CAS; Yu Chen, Tsinghua University; Zhengde Zhai, Shoumeng Yan, and Zhengyu He, Ant Group
  - PRIDWEN: Universally Hardening SGX Programs via Load-Time Synthesis
    Fan Sang, Georgia Institute of Technology; Ming-Wei Shih, Microsoft; Sangho Lee, Microsoft Research; Xiaokuan Zhang, Georgia Institute of Technology; Michael Steiner, Intel; Mona Vij, Intel Labs; Taesoo Kim, Georgia Institute of Technology

- Machine Learning 2

  - Tetris: Memory-efficient Serverless Inference through Tensor Sharing
    Jie Li, Laiping Zhao, and Yanan Yang, Tianjin University; Kunlin Zhan, 58.com; Keqiu Li, Tianjin University
  - PetS: A Unified Framework for Parameter-Efficient Transformers Serving
    Zhe Zhou, Peking University; Xuechao Wei, Peking University, Alibaba Group; Jiejing Zhang, Alibaba Group; Guangyu Sun, Peking University
  - Campo: Cost-Aware Performance Optimization for Mixed-Precision Neural Network Training
    Xin He, CSEE, Hunan University & Xidian University; Jianhua Sun and Hao Chen, CSEE, Hunan University; Dong Li, University of California, Merced
  - Primo: Practical Learning-Augmented Systems with Interpretable Models
    Qinghao Hu, Nanyang Technological University; Harsha Nori, Microsoft; Peng Sun, SenseTime; Yonggang Wen and Tianwei Zhang, Nanyang Technological University

- Distributed Systems 2

  - Meces: Latency-efficient Rescaling via Prioritized State Migration for Stateful Distributed Stream Processing Systems
    Rong Gu, Han Yin, Weichang Zhong, Chunfeng Yuan, and Yihua Huang, State Key Laboratory for Novel Software Technology, Nanjing University
  - DepFast: Orchestrating Code of Quorum Systems
    Xuhao Luo, University of Illinois at Urbana-Champaign; Weihai Shen and Shuai Mu, Stony Brook University; Tianyin Xu, University of Illinois at Urbana-Champaign
  - High Throughput Replication with Integrated Membership Management
    Pedro Fouto, Nuno PreguiÃ§a, and JoÃ£o LeitÃ£o, NOVA LINCS & NOVA University Lisbon

- Operating Systems 2

  - CBMM: Financial Advice for Kernel Memory Managers
    Mark Mansi, Bijan Tabatabai, and Michael M. Swift, University of Wisconsin - Madison
  - EPK: Scalable and Efficient Memory Protection Keys
    Jinyu Gu, Hao Li, Wentai Li, Yubin Xia, and Haibo Chen, Shanghai Jiao Tong University
  - Memory Harvesting in Multi-GPU Systems with Hierarchical Unified Virtual Memory
    Sangjin Choi and Taeksoo Kim, KAIST; Jinwoo Jeong, Ajou University; Rachata Ausavarungnirun, King Mongkut's University of Technology North Bangkok; Myeongjae Jeon, UNIST; Youngjin Kwon, KAIST; Jeongseob Ahn, Ajou University

- Deployed Systems 1

  - Zero Overhead Monitoring for Cloud-native Infrastructure using RDMA
    Zhe Wang, Shanghai Jiao Tong University; Teng Ma, Alibaba Group; Linghe Kong, Shanghai Jiao Tong University; Zhenzao Wen, Jingxuan Li, Zhuo Song, Yang Lu, Yong Yang, and Tao Ma, Alibaba Group; Guihai Chen, Shanghai Jiao Tong University; Wei Cao, Alibaba Group
  - CRISP: Critical Path Analysis of Large-Scale Microservice Architectures
    Zhizhou Zhang, UC Santa Barbara; Murali Krishna Ramanathan, Prithvi Raj, and Abhishek Parwal, Uber Technologies Inc.; Timothy Sherwood, UC Santa Barbara; Milind Chabbi, Uber Technologies Inc.
  - Whale: Efficient Giant Model Training over Heterogeneous GPUs
    Xianyan Jia, Le Jiang, Ang Wang, and Wencong Xiao, Alibaba Group; Ziji Shi, National University of Singapore & Alibaba Group; Jie Zhang, Xinyuan Li, Langshi Chen, Yong Li, Zhen Zheng, Xiaoyong Liu, and Wei Lin, Alibaba Group

- Machine Learning 3

  - Cachew: Machine Learning Input Data Processing as a Service
    Dan Graur, Damien Aymon, Dan Kluser, and Tanguy Albrici, ETH Zurich; Chandramohan A. Thekkath, Google; Ana Klimovic, ETH Zurich
  - CoVA: Exploiting Compressed-Domain Analysis to Accelerate Video Analytics
    Jinwoo Hwang, Minsu Kim, Daeun Kim, Seungho Nam, Yoonsung Kim, and Dohee Kim, KAIST; Hardik Sharma, Google; Jongse Park, KAIST
  - SOTER: Guarding Black-box Inference for General Neural Networks at the Edge
    Tianxiang Shen, Ji Qi, Jianyu Jiang, Xian Wang, Siyuan Wen, Xusheng Chen, and Shixiong Zhao, The University of Hong Kong; Sen Wang and Li Chen, Huawei Technologies; Xiapu Luo, The Hong Kong Polytechnic University; Fengwei Zhang, Southern University of Science and Technology (SUSTech); Heming Cui, The University of Hong Kong

- Storage 2

  - IPLFS: Log-Structured File System without Garbage Collection
    Juwon Kim, Minsu Jang, Muhammad Danish Tehseen, Joontaek Oh, and YouJip Won, KAIST
  - Vigil-KV: Hardware-Software Co-Design to Integrate Strong Latency Determinism into Log-Structured Merge Key-Value Stores
    Miryeong Kwon, Seungjun Lee, and Hyunkyu Choi, KAIST; Jooyoung Hwang, Samsung Electronics Co., Ltd.; Myoungsoo Jung, KAIST
  - Pacman: An Efficient Compaction Approach for Log-Structured Key-Value Store on Persistent Memory
    Jing Wang, Youyou Lu, Qing Wang, and Minhui Xie, Tsinghua University; Keji Huang, Huawei Technologies Co., Ltd; Jiwu Shu, Tsinghua University

- Networking 2

  - Towards Latency Awareness for Content Delivery Network Caching
    Gang Yan and Jian Li, SUNY-Binghamton University
  - Hashing Design in Modern Networks: Challenges and Mitigation Techniques
    Yunhong Xu, Texas A&M University; Keqiang He and Rui Wang, Google; Minlan Yu, Harvard University; Nick Duffield, Texas A&M University; Hassan Wassel, Shidong Zhang, Leon Poutievski, Junlan Zhou, and Amin Vahdat, Google
  - Firebolt: Finding Bugs in Programmable Data Plane Generators
    Jiamin Cao, Tsinghua University; Yu Zhou and Chen Sun, Alibaba Group; Lin He, Zhaowei Xi, and Ying Liu, Tsinghua University

- Compilers and PL

  - Investigating Managed Language Runtime Performance: Why JavaScript and Python are 8x and 29x slower than C++, yet Java and Go can be Faster?
    David Lion, University of Toronto and YScope Inc.; Adrian Chiu and Michael Stumm, University of Toronto; Ding Yuan, University of Toronto and YScope Inc.
  - Automatic Recovery of Fine-grained Compiler Artifacts at the Binary Level
    Yufei Du, University of North Carolina at Chapel Hill; Ryan Court and Kevin Snow, Zeropoint Dynamics; Fabian Monrose, University of North Carolina at Chapel Hill
  - JITServer: Disaggregated Caching JIT Compiler for the JVM in the Cloud
    Alexey Khrabrov, University of Toronto; Marius Pirvu and Vijay Sundaresan, IBM; Eyal de Lara, University of Toronto
  - Riker: Always-Correct and Fast Incremental Builds from Simple Specifications
    Charlie Curtsinger, Grinnell College; Daniel W. Barowy, Williams College
    - **Awarded Best Paper!**

- Storage 3

  - FlatFS: Flatten Hierarchical File System Namespace on Non-volatile Memories
    Miao Cai, Key Laboratory of Water Big Data Technology of Ministry of Water Resources, Hohai University; School of Computer and Information, Hohai University; State Key Laboratory for Novel Software Technology, Nanjing University; Junru Shen, School of Computer and Information, Hohai University; Bin Tang, Key Laboratory of Water Big Data Technology of Ministry of Water Resources, Hohai University; Hao Huang, State Key Laboratory for Novel Software Technology, Nanjing University; Baoliu Ye, State Key Laboratory for Novel Software Technology, Nanjing University; Key Laboratory of Water Big Data Technology of Ministry of Water Resources, Hohai University; School of Computer and Information, Hohai University
  - StRAID: Stripe-threaded Architecture for Parity-based RAIDs with Ultra-fast SSDs
    Shucheng Wang, Qiang Cao, and Ziyi Lu, Wuhan National Laboratory for Optoelectronics, HUST; Hong Jiang, Department of Computer Science and Engineering, UT Arlington; Jie Yao, School of Computer Science and Technology, HUST; Yuanyuan Dong, Alibaba Group
  - Vinter: Automatic Non-Volatile Memory Crash Consistency Testing for Full Systems
    Samuel Kalbfleisch, Lukas Werling, and Frank Bellosa, Karlsruhe Institute of Technology

- NICs

  - AlNiCo: SmartNIC-accelerated Contention-aware Request Scheduling for Transaction Processing
    Junru Li, Youyou Lu, Qing Wang, Jiazhen Lin, Zhe Yang, and Jiwu Shu, Tsinghua University
  - FpgaNIC: An FPGA-based Versatile 100Gb SmartNIC for GPUs
    Zeke Wang, Hongjing Huang, Jie Zhang, and Fei Wu, Zhejiang University; Gustavo Alonso, ETH Zurich
  - Faster Software Packet Processing on FPGA NICs with eBPF Program Warping
    Marco Bonola, CNIT/Axbryd; Giacomo Belocchi, Angelo Tulumello, and Marco Spaziani Brunella, Axbryd/University of Rome Tor Vergata; Giuseppe Siracusano, NEC Laboratories Europe; Giuseppe Bianchi, University of Rome Tor Vergata/CNIT; Roberto Bifulco, NEC Laboratories Europe

- Deployed Systems 2

  - NVMe SSD Failures in the Field: the Fail-Stop and the Fail-Slow
    Ruiming Lu, Shanghai Jiao Tong University; Erci Xu, PDL; Yiming Zhang, Xiamen University; Zhaosheng Zhu, Mengtian Wang, and Zongpeng Zhu, Alibaba Inc.; Guangtao Xue, Shanghai Jiao Tong University; Minglu Li, Shanghai Jiao Tong University & Zhejiang Normal University; Jiesheng Wu, Alibaba Inc.

  - CacheSack: Admission Optimization for Google Datacenter Flash Caches
    Tzu-Wei Yang, Seth Pollen, Mustafa Uysal, Arif Merchant, and Homer Wolfmeister, Google

  - Amazon DynamoDB: A Scalable, Predictably Performant, and Fully Managed NoSQL Database Service
    Mostafa Elhemali, Niall Gallagher, Nicholas Gordon, Joseph Idziorek, Richard Krog, Colin Lazier, Erben Mo, Akhilesh Mritunjai, Somu Perianayagam ,Tim Rath, Swami Sivasubramanian, James Christopher Sorenson III, Sroaj Sosothikul, Doug Terry, Akshat Vig, Amazon Web Services

    

### OSDI 22

- [ä¸Šäº¤è¯„è¿°](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA5NTExMDc2Ng==&action=getalbum&album_id=2485954006998286337&scene=173&from_msgid=2651380636&from_itemidx=1&count=3&nolastread=1#wechat_redirect)

### SIGMOD 22

### FAST 22

